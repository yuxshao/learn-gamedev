<!DOCTYPE html><html><head><meta charset="utf-8"><style>html { font-size: 100%; overflow-y: scroll; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }

body{
  color:#444;
  font-family:Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman',
              "Hiragino Sans GB", "STXihei", "微软雅黑", serif;
  font-size:12px;
  line-height:1.5em;
  background:#fefefe;
  width: 45em;
  margin: 10px auto;
  padding: 1em;
  outline: 1300px solid #FAFAFA;
}

a{ color: #0645ad; text-decoration:none;}
a:visited{ color: #0b0080; }
a:hover{ color: #06e; }
a:active{ color:#faa700; }
a:focus{ outline: thin dotted; }
a:hover, a:active{ outline: 0; }

span.backtick {
  border:1px solid #EAEAEA;
  border-radius:3px;
  background:#F8F8F8;
  padding:0 3px 0 3px;
}

::-moz-selection{background:rgba(255,255,0,0.3);color:#000}
::selection{background:rgba(255,255,0,0.3);color:#000}

a::-moz-selection{background:rgba(255,255,0,0.3);color:#0645ad}
a::selection{background:rgba(255,255,0,0.3);color:#0645ad}

p{
margin:1em 0;
}

img{
max-width:100%;
}

h1,h2,h3,h4,h5,h6{
font-weight:normal;
color:#111;
line-height:1em;
}
h4,h5,h6{ font-weight: bold; }
h1{ font-size:2.5em; }
h2{ font-size:2em; border-bottom:1px solid silver; padding-bottom: 5px; }
h3{ font-size:1.5em; }
h4{ font-size:1.2em; }
h5{ font-size:1em; }
h6{ font-size:0.9em; }

blockquote{
color:#666666;
margin:0;
padding-left: 3em;
border-left: 0.5em #EEE solid;
}
hr { display: block; height: 2px; border: 0; border-top: 1px solid #aaa;border-bottom: 1px solid #eee; margin: 1em 0; padding: 0; }


pre , code, kbd, samp { 
  color: #000; 
  font-family: monospace; 
  font-size: 0.88em; 
  border-radius:3px;
  background-color: #F8F8F8;
  border: 1px solid #CCC; 
}
pre { white-space: pre; white-space: pre-wrap; word-wrap: break-word; padding: 5px 12px;}
pre code { border: 0px !important; padding: 0;}
code { padding: 0 3px 0 3px; }

b, strong { font-weight: bold; }

dfn { font-style: italic; }

ins { background: #ff9; color: #000; text-decoration: none; }

mark { background: #ff0; color: #000; font-style: italic; font-weight: bold; }

sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }

ul, ol { margin: 1em 0; padding: 0 0 0 2em; }
li p:last-child { margin:0 }
dd { margin: 0 0 0 2em; }

img { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; }

table { border-collapse: collapse; border-spacing: 0; }
td { vertical-align: top; }

@media only screen and (min-width: 480px) {
body{font-size:14px;}
}

@media only screen and (min-width: 768px) {
body{font-size:16px;}
}

@media print {
  * { background: transparent !important; color: black !important; filter:none !important; -ms-filter: none !important; }
  body{font-size:12pt; max-width:100%; outline:none;}
  a, a:visited { text-decoration: underline; }
  hr { height: 1px; border:0; border-bottom:1px solid black; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; padding-right: 1em; page-break-inside: avoid; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page :left { margin: 15mm 20mm 15mm 10mm; }
  @page :right { margin: 15mm 10mm 15mm 20mm; }
  p, h2, h3 { orphans: 3; widows: 3; }
  h2, h3 { page-break-after: avoid; }
}
</style><style>/* to allow side-by-side code blocks */
.join {
	height: 0;
	margin: 0;
}
.join + pre {
	width: 45%;
  float:left;
	display: inline-block;
	margin-top: 0;
	margin-bottom: 0;
}
pre + pre {
	display: inline-block;
	width: 45%;
	float: right;
	margin-top: 0;
	margin-bottom: 0;
}
pre + .clear {
	margin: 0;
	height: 0;
	clear: both;
}
ul ul {
	margin-top: 0;
	margin-bottom: 0;
}

/* Fork me on Github*/
img.github {
  position: absolute;
  top: 0;
  right: 0;
  border: 0;
}

/* headers and top links*/

#top {
  position: absolute;
  top:0;
}

.top {
  float:right;
  padding-top: 20px;
}

/* "Responsive" */
body {
  width: 90%;
  max-width: 50em;
}

/* make tables pretty */
table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      border-bottom-width: 3px;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }</style><style>/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

pre code {
  display: block; padding: 0.5em;
  color: #333;
  background: #f8f8ff
}

pre .comment,
pre .template_comment,
pre .diff .header,
pre .javadoc {
  color: #998;
  font-style: italic
}

pre .keyword,
pre .css .rule .keyword,
pre .winutils,
pre .javascript .title,
pre .nginx .title,
pre .subst,
pre .request,
pre .status {
  color: #333;
  font-weight: bold
}

pre .number,
pre .hexcolor,
pre .ruby .constant {
  color: #099;
}

pre .string,
pre .tag .value,
pre .phpdoc,
pre .tex .formula {
  color: #d14
}

pre .title,
pre .id,
pre .coffeescript .params,
pre .scss .preprocessor {
  color: #900;
  font-weight: bold
}

pre .javascript .title,
pre .lisp .title,
pre .clojure .title,
pre .subst {
  font-weight: normal
}

pre .class .title,
pre .haskell .type,
pre .vhdl .literal,
pre .tex .command {
  color: #458;
  font-weight: bold
}

pre .tag,
pre .tag .title,
pre .rules .property,
pre .django .tag .keyword {
  color: #000080;
  font-weight: normal
}

pre .attribute,
pre .variable,
pre .lisp .body {
  color: #008080
}

pre .regexp {
  color: #009926
}

pre .class {
  color: #458;
  font-weight: bold
}

pre .symbol,
pre .ruby .symbol .string,
pre .lisp .keyword,
pre .tex .special,
pre .prompt {
  color: #990073
}

pre .built_in,
pre .lisp .title,
pre .clojure .built_in {
  color: #0086b3
}

pre .preprocessor,
pre .pi,
pre .doctype,
pre .shebang,
pre .cdata {
  color: #999;
  font-weight: bold
}

pre .deletion {
  background: #fdd
}

pre .addition {
  background: #dfd
}

pre .diff .change {
  background: #0086b3
}

pre .chunk {
  color: #aaa
}</style><script>var hljs=new function(){function l(o){return o.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function b(p){for(var o=p.firstChild;o;o=o.nextSibling){if(o.nodeName=="CODE"){return o}if(!(o.nodeType==3&&o.nodeValue.match(/\s+/))){break}}}function h(p,o){return Array.prototype.map.call(p.childNodes,function(q){if(q.nodeType==3){return o?q.nodeValue.replace(/\n/g,""):q.nodeValue}if(q.nodeName=="BR"){return"\n"}return h(q,o)}).join("")}function a(q){var p=(q.className+" "+q.parentNode.className).split(/\s+/);p=p.map(function(r){return r.replace(/^language-/,"")});for(var o=0;o<p.length;o++){if(e[p[o]]||p[o]=="no-highlight"){return p[o]}}}function c(q){var o=[];(function p(r,s){for(var t=r.firstChild;t;t=t.nextSibling){if(t.nodeType==3){s+=t.nodeValue.length}else{if(t.nodeName=="BR"){s+=1}else{if(t.nodeType==1){o.push({event:"start",offset:s,node:t});s=p(t,s);o.push({event:"stop",offset:s,node:t})}}}}return s})(q,0);return o}function j(x,v,w){var p=0;var y="";var r=[];function t(){if(x.length&&v.length){if(x[0].offset!=v[0].offset){return(x[0].offset<v[0].offset)?x:v}else{return v[0].event=="start"?x:v}}else{return x.length?x:v}}function s(A){function z(B){return" "+B.nodeName+'="'+l(B.value)+'"'}return"<"+A.nodeName+Array.prototype.map.call(A.attributes,z).join("")+">"}while(x.length||v.length){var u=t().splice(0,1)[0];y+=l(w.substr(p,u.offset-p));p=u.offset;if(u.event=="start"){y+=s(u.node);r.push(u.node)}else{if(u.event=="stop"){var o,q=r.length;do{q--;o=r[q];y+=("</"+o.nodeName.toLowerCase()+">")}while(o!=u.node);r.splice(q,1);while(q<r.length){y+=s(r[q]);q++}}}}return y+l(w.substr(p))}function f(q){function o(s,r){return RegExp(s,"m"+(q.cI?"i":"")+(r?"g":""))}function p(y,w){if(y.compiled){return}y.compiled=true;var s=[];if(y.k){var r={};function z(A,t){t.split(" ").forEach(function(B){var C=B.split("|");r[C[0]]=[A,C[1]?Number(C[1]):1];s.push(C[0])})}y.lR=o(y.l||hljs.IR,true);if(typeof y.k=="string"){z("keyword",y.k)}else{for(var x in y.k){if(!y.k.hasOwnProperty(x)){continue}z(x,y.k[x])}}y.k=r}if(w){if(y.bWK){y.b="\\b("+s.join("|")+")\\s"}y.bR=o(y.b?y.b:"\\B|\\b");if(!y.e&&!y.eW){y.e="\\B|\\b"}if(y.e){y.eR=o(y.e)}y.tE=y.e||"";if(y.eW&&w.tE){y.tE+=(y.e?"|":"")+w.tE}}if(y.i){y.iR=o(y.i)}if(y.r===undefined){y.r=1}if(!y.c){y.c=[]}for(var v=0;v<y.c.length;v++){if(y.c[v]=="self"){y.c[v]=y}p(y.c[v],y)}if(y.starts){p(y.starts,w)}var u=[];for(var v=0;v<y.c.length;v++){u.push(y.c[v].b)}if(y.tE){u.push(y.tE)}if(y.i){u.push(y.i)}y.t=u.length?o(u.join("|"),true):{exec:function(t){return null}}}p(q)}function d(D,E){function o(r,M){for(var L=0;L<M.c.length;L++){var K=M.c[L].bR.exec(r);if(K&&K.index==0){return M.c[L]}}}function s(K,r){if(K.e&&K.eR.test(r)){return K}if(K.eW){return s(K.parent,r)}}function t(r,K){return K.i&&K.iR.test(r)}function y(L,r){var K=F.cI?r[0].toLowerCase():r[0];return L.k.hasOwnProperty(K)&&L.k[K]}function G(){var K=l(w);if(!A.k){return K}var r="";var N=0;A.lR.lastIndex=0;var L=A.lR.exec(K);while(L){r+=K.substr(N,L.index-N);var M=y(A,L);if(M){v+=M[1];r+='<span class="'+M[0]+'">'+L[0]+"</span>"}else{r+=L[0]}N=A.lR.lastIndex;L=A.lR.exec(K)}return r+K.substr(N)}function z(){if(A.sL&&!e[A.sL]){return l(w)}var r=A.sL?d(A.sL,w):g(w);if(A.r>0){v+=r.keyword_count;B+=r.r}return'<span class="'+r.language+'">'+r.value+"</span>"}function J(){return A.sL!==undefined?z():G()}function I(L,r){var K=L.cN?'<span class="'+L.cN+'">':"";if(L.rB){x+=K;w=""}else{if(L.eB){x+=l(r)+K;w=""}else{x+=K;w=r}}A=Object.create(L,{parent:{value:A}});B+=L.r}function C(K,r){w+=K;if(r===undefined){x+=J();return 0}var L=o(r,A);if(L){x+=J();I(L,r);return L.rB?0:r.length}var M=s(A,r);if(M){if(!(M.rE||M.eE)){w+=r}x+=J();do{if(A.cN){x+="</span>"}A=A.parent}while(A!=M.parent);if(M.eE){x+=l(r)}w="";if(M.starts){I(M.starts,"")}return M.rE?0:r.length}if(t(r,A)){throw"Illegal"}w+=r;return r.length||1}var F=e[D];f(F);var A=F;var w="";var B=0;var v=0;var x="";try{var u,q,p=0;while(true){A.t.lastIndex=p;u=A.t.exec(E);if(!u){break}q=C(E.substr(p,u.index-p),u[0]);p=u.index+q}C(E.substr(p));return{r:B,keyword_count:v,value:x,language:D}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:l(E)}}else{throw H}}}function g(s){var o={keyword_count:0,r:0,value:l(s)};var q=o;for(var p in e){if(!e.hasOwnProperty(p)){continue}var r=d(p,s);r.language=p;if(r.keyword_count+r.r>q.keyword_count+q.r){q=r}if(r.keyword_count+r.r>o.keyword_count+o.r){q=o;o=r}}if(q.language){o.second_best=q}return o}function i(q,p,o){if(p){q=q.replace(/^((<[^>]+>|\t)+)/gm,function(r,v,u,t){return v.replace(/\t/g,p)})}if(o){q=q.replace(/\n/g,"<br>")}return q}function m(r,u,p){var v=h(r,p);var t=a(r);if(t=="no-highlight"){return}var w=t?d(t,v):g(v);t=w.language;var o=c(r);if(o.length){var q=document.createElement("pre");q.innerHTML=w.value;w.value=j(o,c(q),v)}w.value=i(w.value,u,p);var s=r.className;if(!s.match("(\\s|^)(language-)?"+t+"(\\s|$)")){s=s?(s+" "+t):t}r.innerHTML=w.value;r.className=s;r.result={language:t,kw:w.keyword_count,re:w.r};if(w.second_best){r.second_best={language:w.second_best.language,kw:w.second_best.keyword_count,re:w.second_best.r}}}function n(){if(n.called){return}n.called=true;Array.prototype.map.call(document.getElementsByTagName("pre"),b).filter(Boolean).forEach(function(o){m(o,hljs.tabReplace)})}function k(){window.addEventListener("DOMContentLoaded",n,false);window.addEventListener("load",n,false)}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=m;this.initHighlighting=n;this.initHighlightingOnLoad=k;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.BE={b:"\\\\[\\s\\S]",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(q,r){var o={};for(var p in q){o[p]=q[p]}if(r){for(var p in r){o[p]=r[p]}}return o}}();hljs.LANGUAGES.bash=function(a){var g="true false";var e="if then else elif fi for break continue while in do done echo exit return set declare";var c={cN:"variable",b:"\\$[a-zA-Z0-9_#]+"};var b={cN:"variable",b:"\\${([^}]|\\\\})+}"};var h={cN:"string",b:'"',e:'"',i:"\\n",c:[a.BE,c,b],r:0};var d={cN:"string",b:"'",e:"'",c:[{b:"''"}],r:0};var f={cN:"test_condition",b:"",e:"",c:[h,d,c,b],k:{literal:g},r:0};return{k:{keyword:e,literal:g},c:[{cN:"shebang",b:"(#!\\/bin\\/bash)|(#!\\/bin\\/sh)",r:10},c,b,a.HCM,h,d,a.inherit(f,{b:"\\[ ",e:" \\]",r:0}),a.inherit(f,{b:"\\[\\[ ",e:" \\]\\]"})]}}(hljs);hljs.LANGUAGES.cs=function(a){return{k:"abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while ascending descending from get group into join let orderby partial select set value var where yield",c:[{cN:"comment",b:"///",e:"$",rB:true,c:[{cN:"xmlDocTag",b:"///|<!--|-->"},{cN:"xmlDocTag",b:"</?",e:">"}]},a.CLCM,a.CBLCLM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},a.ASM,a.QSM,a.CNM]}}(hljs);hljs.LANGUAGES.ruby=function(e){var a="[a-zA-Z_][a-zA-Z0-9_]*(\\!|\\?)?";var j="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?";var g={keyword:"and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include"};var c={cN:"yardoctag",b:"@[A-Za-z]+"};var k=[{cN:"comment",b:"#",e:"$",c:[c]},{cN:"comment",b:"^\\=begin",e:"^\\=end",c:[c],r:10},{cN:"comment",b:"^__END__",e:"\\n$"}];var d={cN:"subst",b:"#\\{",e:"}",l:a,k:g};var i=[e.BE,d];var b=[{cN:"string",b:"'",e:"'",c:i,r:0},{cN:"string",b:'"',e:'"',c:i,r:0},{cN:"string",b:"%[qw]?\\(",e:"\\)",c:i},{cN:"string",b:"%[qw]?\\[",e:"\\]",c:i},{cN:"string",b:"%[qw]?{",e:"}",c:i},{cN:"string",b:"%[qw]?<",e:">",c:i,r:10},{cN:"string",b:"%[qw]?/",e:"/",c:i,r:10},{cN:"string",b:"%[qw]?%",e:"%",c:i,r:10},{cN:"string",b:"%[qw]?-",e:"-",c:i,r:10},{cN:"string",b:"%[qw]?\\|",e:"\\|",c:i,r:10}];var h={cN:"function",bWK:true,e:" |$|;",k:"def",c:[{cN:"title",b:j,l:a,k:g},{cN:"params",b:"\\(",e:"\\)",l:a,k:g}].concat(k)};var f=k.concat(b.concat([{cN:"class",bWK:true,e:"$|;",k:"class module",c:[{cN:"title",b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?",r:0},{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]}].concat(k)},h,{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:":",c:b.concat([{b:j}]),r:0},{cN:"symbol",b:a+":",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"number",b:"\\?\\w"},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:k.concat([{cN:"regexp",b:"/",e:"/[a-z]*",i:"\\n",c:[e.BE,d]}]),r:0}]));d.c=f;h.c[1].c=f;return{l:a,k:g,c:f}}(hljs);hljs.LANGUAGES.diff=function(a){return{c:[{cN:"chunk",b:"^\\@\\@ +\\-\\d+,\\d+ +\\+\\d+,\\d+ +\\@\\@$",r:10},{cN:"chunk",b:"^\\*\\*\\* +\\d+,\\d+ +\\*\\*\\*\\*$",r:10},{cN:"chunk",b:"^\\-\\-\\- +\\d+,\\d+ +\\-\\-\\-\\-$",r:10},{cN:"header",b:"Index: ",e:"$"},{cN:"header",b:"=====",e:"=====$"},{cN:"header",b:"^\\-\\-\\-",e:"$"},{cN:"header",b:"^\\*{3} ",e:"$"},{cN:"header",b:"^\\+\\+\\+",e:"$"},{cN:"header",b:"\\*{5}",e:"\\*{5}$"},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}(hljs);hljs.LANGUAGES.javascript=function(a){return{k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const",literal:"true false null undefined NaN Infinity"},c:[a.ASM,a.QSM,a.CLCM,a.CBLCLM,a.CNM,{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",i:"\\n",c:[{b:"\\\\/"}]},{b:"<",e:">;",sL:"xml"}],r:0},{cN:"function",bWK:true,e:"{",k:"function",c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[a.CLCM,a.CBLCLM],i:"[\"'\\(]"}],i:"\\[|%"}]}}(hljs);hljs.LANGUAGES.css=function(a){var b={cN:"function",b:a.IR+"\\(",e:"\\)",c:[a.NM,a.ASM,a.QSM]};return{cI:true,i:"[=/|']",c:[a.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",eE:true,k:"import page media charset",c:[b,a.ASM,a.QSM,a.NM]},{cN:"tag",b:a.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[a.CBLCLM,{cN:"rule",b:"[^\\s]",rB:true,e:";",eW:true,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:true,i:"[^\\s]",starts:{cN:"value",eW:true,eE:true,c:[b,a.NM,a.QSM,a.ASM,a.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}(hljs);hljs.LANGUAGES.xml=function(a){var c="[A-Za-z0-9\\._:-]+";var b={eW:true,c:[{cN:"attribute",b:c,r:0},{b:'="',rB:true,e:'"',c:[{cN:"value",b:'"',eW:true}]},{b:"='",rB:true,e:"'",c:[{cN:"value",b:"'",eW:true}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:true,c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[b],starts:{e:"</style>",rE:true,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[b],starts:{e:"<\/script>",rE:true,sL:"javascript"}},{b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},b]}]}}(hljs);hljs.LANGUAGES.http=function(a){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:true,e:"$",c:[{cN:"string",b:" ",e:" ",eB:true,eE:true}]},{cN:"attribute",b:"^\\w",e:": ",eE:true,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:true}}]}}(hljs);hljs.LANGUAGES.java=function(a){return{k:"false synchronized int abstract float private char boolean static null if const for true while long throw strictfp finally protected import native final return void enum else break transient new catch instanceof byte super volatile case assert short package default double public try this switch continue throws",c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"@[A-Za-z]+"}],r:10},a.CLCM,a.CBLCLM,a.ASM,a.QSM,{cN:"class",bWK:true,e:"{",k:"class interface",i:":",c:[{bWK:true,k:"extends implements",r:10},{cN:"title",b:a.UIR}]},a.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}}(hljs);hljs.LANGUAGES.php=function(a){var e={cN:"variable",b:"\\$+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*"};var b=[a.inherit(a.ASM,{i:null}),a.inherit(a.QSM,{i:null}),{cN:"string",b:'b"',e:'"',c:[a.BE]},{cN:"string",b:"b'",e:"'",c:[a.BE]}];var c=[a.BNM,a.CNM];var d={cN:"title",b:a.UIR};return{cI:true,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return implements parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception php_user_filter default die require __FUNCTION__ enddeclare final try this switch continue endfor endif declare unset true false namespace trait goto instanceof insteadof __DIR__ __NAMESPACE__ __halt_compiler",c:[a.CLCM,a.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"}]},{cN:"comment",eB:true,b:"__halt_compiler.+?;",eW:true},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[a.BE]},{cN:"preprocessor",b:"<\\?php",r:10},{cN:"preprocessor",b:"\\?>"},e,{cN:"function",bWK:true,e:"{",k:"function",i:"\\$|\\[|%",c:[d,{cN:"params",b:"\\(",e:"\\)",c:["self",e,a.CBLCLM].concat(b).concat(c)}]},{cN:"class",bWK:true,e:"{",k:"class",i:"[:\\(\\$]",c:[{bWK:true,eW:true,k:"extends",c:[d]},d]},{b:"=>"}].concat(b).concat(c)}}(hljs);hljs.LANGUAGES.python=function(a){var f={cN:"prompt",b:"^(>>>|\\.\\.\\.) "};var c=[{cN:"string",b:"(u|b)?r?'''",e:"'''",c:[f],r:10},{cN:"string",b:'(u|b)?r?"""',e:'"""',c:[f],r:10},{cN:"string",b:"(u|r|ur)'",e:"'",c:[a.BE],r:10},{cN:"string",b:'(u|r|ur)"',e:'"',c:[a.BE],r:10},{cN:"string",b:"(b|br)'",e:"'",c:[a.BE]},{cN:"string",b:'(b|br)"',e:'"',c:[a.BE]}].concat([a.ASM,a.QSM]);var e={cN:"title",b:a.UIR};var d={cN:"params",b:"\\(",e:"\\)",c:["self",a.CNM,f].concat(c)};var b={bWK:true,e:":",i:"[${=;\\n]",c:[e,d],r:10};return{k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10",built_in:"None True False Ellipsis NotImplemented"},i:"(</|->|\\?)",c:c.concat([f,a.HCM,a.inherit(b,{cN:"function",k:"def"}),a.inherit(b,{cN:"class",k:"class"}),a.CNM,{cN:"decorator",b:"@",e:"$"},{b:"\\b(print|exec)\\("}])}}(hljs);hljs.LANGUAGES.sql=function(a){return{cI:true,c:[{cN:"operator",b:"(begin|start|commit|rollback|savepoint|lock|alter|create|drop|rename|call|delete|do|handler|insert|load|replace|select|truncate|update|set|show|pragma|grant)\\b(?!:)",e:";",eW:true,k:{keyword:"all partial global month current_timestamp using go revoke smallint indicator end-exec disconnect zone with character assertion to add current_user usage input local alter match collate real then rollback get read timestamp session_user not integer bit unique day minute desc insert execute like ilike|2 level decimal drop continue isolation found where constraints domain right national some module transaction relative second connect escape close system_user for deferred section cast current sqlstate allocate intersect deallocate numeric public preserve full goto initially asc no key output collation group by union session both last language constraint column of space foreign deferrable prior connection unknown action commit view or first into float year primary cascaded except restrict set references names table outer open select size are rows from prepare distinct leading create only next inner authorization schema corresponding option declare precision immediate else timezone_minute external varying translation true case exception join hour default double scroll value cursor descriptor values dec fetch procedure delete and false int is describe char as at in varchar null trailing any absolute current_time end grant privileges when cross check write current_date pad begin temporary exec time update catalog user sql date on identity timezone_hour natural whenever interval work order cascade diagnostics nchar having left call do handler load replace truncate start lock show pragma exists number",aggregate:"count sum min max avg"},c:[{cN:"string",b:"'",e:"'",c:[a.BE,{b:"''"}],r:0},{cN:"string",b:'"',e:'"',c:[a.BE,{b:'""'}],r:0},{cN:"string",b:"`",e:"`",c:[a.BE]},a.CNM]},a.CBLCLM,{cN:"comment",b:"--",e:"$"}]}}(hljs);hljs.LANGUAGES.ini=function(a){return{cI:true,i:"[^\\s]",c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:true,k:"on off true false yes no",c:[a.QSM,a.NM]}]}]}}(hljs);hljs.LANGUAGES.perl=function(e){var a="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when";var d={cN:"subst",b:"[$@]\\{",e:"\\}",k:a,r:10};var b={cN:"variable",b:"\\$\\d"};var i={cN:"variable",b:"[\\$\\%\\@\\*](\\^\\w\\b|#\\w+(\\:\\:\\w+)*|[^\\s\\w{]|{\\w+}|\\w+(\\:\\:\\w*)*)"};var f=[e.BE,d,b,i];var h={b:"->",c:[{b:e.IR},{b:"{",e:"}"}]};var g={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5};var c=[b,i,e.HCM,g,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:true},h,{cN:"string",b:"q[qwxr]?\\s*\\(",e:"\\)",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\[",e:"\\]",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\{",e:"\\}",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\|",e:"\\|",c:f,r:5},{cN:"string",b:"q[qwxr]?\\s*\\<",e:"\\>",c:f,r:5},{cN:"string",b:"qw\\s+q",e:"q",c:f,r:5},{cN:"string",b:"'",e:"'",c:[e.BE],r:0},{cN:"string",b:'"',e:'"',c:f,r:0},{cN:"string",b:"`",e:"`",c:[e.BE]},{cN:"string",b:"{\\w+}",r:0},{cN:"string",b:"-?\\w+\\s*\\=\\>",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"("+e.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[e.HCM,g,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[e.BE],r:0}]},{cN:"sub",bWK:true,e:"(\\s*\\(.*?\\))?[;{]",k:"sub",r:5},{cN:"operator",b:"-\\w\\b",r:0}];d.c=c;h.c[1].c=c;return{k:a,c:c}}(hljs);hljs.LANGUAGES.json=function(a){var e={literal:"true false null"};var d=[a.QSM,a.CNM];var c={cN:"value",e:",",eW:true,eE:true,c:d,k:e};var b={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:true,eE:true,c:[a.BE],i:"\\n",starts:c}],i:"\\S"};var f={b:"\\[",e:"\\]",c:[a.inherit(c,{cN:null})],i:"\\S"};d.splice(d.length,0,b,f);return{c:d,k:e,i:"\\S"}}(hljs);hljs.LANGUAGES.cpp=function(a){var b={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long throw volatile static protected bool template mutable if public friend do return goto auto void enum else break new extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr"};return{k:b,i:"</",c:[a.CLCM,a.CBLCLM,a.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},a.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:b,r:10,c:["self"]}]}}(hljs);
</script><script>hljs.initHighlightingOnLoad();</script><title>Introduction to Game Development.md</title></head><body><a href="https://github.com/yuxshao/learn-gamedev"><img class="github" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a><p><a id="top"></a></p>
<h1 id="introduction-to-game-development">Introduction to Game Development</h1>
<p><em>Design Principles and Game Programming</em></p>
<p>Written and developed by <a href="http://cugamedev.org/">CU Game Dev</a>, with support from <a href="file:///home/steven/Files/Desktop/Schoolwork/3/GameDev/curriculum/repo/build/adi">ADI</a>.</p>
<p><a href="#top" class="top" id="getting-started">Top</a></p>
<h1 id="about-this-document">About This Document</h1>
<h2 id="methodology">Methodology</h2>
<p>This guide will guide you through making two simple games. One will be a top-down shooter style game that will help you become familiar with GameMaker and with the concept of a minimum viable product. Afterwards, you will be guided on making a more complex platformer-style game, building upon what we have learned previously.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You must first download and install GameMaker. For Windows users, download from here <a href="http://www.yoyogames.com/studio/download">here</a>, and for Mac, download the Lite edition from <a href="http://yoyogames.com/legacy">here</a>.</p>
<p>The top-down shooter will assume no coding knowledge at all to try to introduce all the basic features of GM as an engine for learning game development. For the platformer, coding knowledge will be a major plus as we dive deeper into the capabilities of the program.</p>
<p>Also, download the <a href="./resources.zip">resource pack</a>, which has sounds and graphical assets to use in your game, as well as project checkpoints to compare against as you go through this tutorial.</p>
<p><a href="#top" class="top" id="table-of-contents">Top</a></p>
<h1 id="table-of-contents">Table of Contents</h1>
<ul>
<li><a href="#level1">Level 1: General Intro to Game Design and Programming</a><ul>
<li><a href="#game-design-considerations">1.1 Game Design considerations</a><ul>
<li><a href="#What-makes-a-good-game">1.1.1 What makes a good game?</a></li>
<li><a href="#Things-to-focus-on">1.1.2 Things to focus on</a></li>
<li><a href="#how-we-develop-games">1.1.3 How we develop games</a></li>
</ul>
</li>
<li><a href="#game-programming">1.2 Game Programming</a><ul>
<li><a href="#game-loop">1.2.1 Game Loop</a></li>
<li><a href="#update-method">1.2.2 Update Method</a></li>
</ul>
</li>
<li><a href="#MVP">1.3 Minimum Viable Product</a><ul>
<li><a href="#bare-bones">1.3.1 What is it?</a></li>
<li><a href="#uses-MVP">1.3.2 Uses of the MVP</a></li>
</ul>
</li>
<li><a href="#tools-used">1.4 Game Development Tools</a><ul>
<li><a href="#list-engines">1.4.1 Game Engines</a></li>
<li><a href="#list-tools">1.4.2 Other Tools</a></li>
</ul>
</li>
<li><a href="#GM-main">1.5 GameMaker</a><ul>
<li><a href="#GM-why">1.5.1 Why GameMaker?</a></li>
<li><a href="#GM-parts">1.5.2 Parts of GameMaker</a></li>
</ul>
</li>
<li><a href="#review-level1">1.6 Review</a></li>
</ul>
</li>
<li><a href="#top-down-shooter">Level 2: A Basic Top-Down Shooter</a><ul>
<li><a href="#create-resource-sounds-sprites">2.1 Creating Resources - Sounds and Sprites</a><ul>
<li><a href="#creating-a-sprite">2.1.1 Creating a Sprite</a></li>
<li><a href="#adding-a-sound">2.1.2 Adding a Sound</a></li>
</ul>
</li>
<li><a href="#basic-game-logic">2.2 Basic Game Logic</a><ul>
<li><a href="#minimal-program">2.2.1 A Minimal Program</a></li>
<li><a href="#adding-motion">2.2.2 Adding Motion</a></li>
<li><a href="#shooting">2.2.3 Shooting</a></li>
</ul>
</li>
<li><a href="#object-interaction-enemies">2.3 Object Interaction - Enemies</a></li>
<li><a href="#control-flow-variables-health">2.4 Control Flow &amp; Variables - Health</a></li>
<li><a href="#alarms-periodic">2.5 Alarms and Periodic Events</a><ul>
<li><a href="#enemy-fire">2.5.1 Enemy Fire</a></li>
<li><a href="#enemy-spawning">2.5.2 Enemy Spawning</a></li>
</ul>
</li>
<li><a href="#polish">2.6 Polishing up our Game</a><ul>
<li><a href="#backgrounds-rooms">2.6.1 Backgrounds in Rooms</a></li>
<li><a href="#animations-explosions">2.6.2 Animations &amp; Explosions</a></li>
<li><a href="#other-suggestions">2.6.3 Other Suggestions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#level3">Level 3: Creating a Platformer</a><ul>
<li><a href="#resource-setup">3.1 Resource Setup</a></li>
<li><a href="#scripts-step-events">3.2 Scripts &amp; the Step Event</a><ul>
<li><a href="#step-event">3.2.1 The Step Event</a></li>
<li><a href="#GM-language">3.2.2 Game Maker Language</a></li>
<li><a href="#GM-defaults">3.2.3 Game Maker Defaults</a></li>
</ul>
</li>
<li><a href="#horizontal-movement">3.3 Horizontal Movement</a><ul>
<li><a href="#first-attempt">3.3.1 A First Attempt</a></li>
<li><a href="#smooth-movement">3.3.2 Smooth Movement</a></li>
</ul>
</li>
<li><a href="#vertical-movement">3.4 Vertical Movement</a><ul>
<li><a href="#gravity">3.4.1 Gravity &amp; Jumping</a></li>
<li><a href="#stopping-your-jump">3.4.2 Stopping Your Jump</a></li>
<li><a href="#walking-animation">3.4.3 Walking Animation</a></li>
</ul>
</li>
<li><a href="#platform-collision">3.5 Platform Collision</a><ul>
<li><a href="#landing-block">3.5.1 Landing on a Block</a></li>
<li><a href="#hitting-block-bottom">3.5.2 Hitting a Block from the Bottom</a></li>
<li><a href="#hitting-block-side">3.5.3 Hitting the Side of the Block</a></li>
<li><a href="#horizontal-vertical">3.5.4 Horizontal or Vertical Collision?</a></li>
<li><a href="#jump-right-time">3.5.5 Jumping at the Right Time</a></li>
<li><a href="#optional-quirk">3.5.6 Optional: A Quirk with GameMaker</a></li>
</ul>
</li>
<li><a href="#views">3.6 Views</a></li>
<li><a href="#tiles">3.7 Tiles</a></li>
<li><a href="#additions">3.8 A Few Additions</a><ul>
<li><a href="#enemies">3.8.1 Enemies</a></li>
<li><a href="#coins">3.8.2 Coins</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#level4">Level 4: States and Menus</a><ul>
<li><a href="#states">4.1 States</a>   </li>
<li><a href="#rooms-in-GM">4.2 Rooms in GameMaker</a><ul>
<li><a href="#basic-rooms-game-start-over">4.2.1 Basic Rooms - Game Start and Game Over</a></li>
<li><a href="#persistent-objects-room-transition">4.2.2 Persistent Objects - Room Transition Effects</a></li>
</ul>
</li>
<li><a href="#manual-drawing">4.3 Manual Drawing</a><ul>
<li><a href="#draw-event">4.3.1 The Draw Event</a></li>
<li><a href="#info-text">4.3.2 Informational Text</a></li>
<li><a href="#hud">4.3.3 A HUD</a></li>
</ul>
</li>
<li><a href="#menus">4.4 A Menu</a></li>
<li><a href="#pause-menu">4.5 A Pause Screen</a></li>
<li><a href="#last-words-level4">4.6 A Few Last Words</a></li>
</ul>
</li>
<li><a href="#level5">Level 5: Design Considerations</a></li>
<li><a href="#additionalresources">Additional Resources</a></li>
</ul>
<hr />
<p><a href="#top" class="top" id="level1">Top</a></p>
<h1 id="level-1-design-programming-intro">Level 1: Design &amp; Programming Intro</h1>
<blockquote>
<p><strong>Goal</strong> - Learn about common game development tools, basics game programming concepts, and minimum viable products is.</p>
</blockquote>
<p>In this first section, we'll speak a little about getting into a game development mindset, mention a few considerations when making a game, and introduce a bunch of tools that studios and individuals use in making a game.</p>
<p><a href="#top" class="top" id="game-design-considerations">Top</a></p>
<h2 id="11-game-design-considerations">1.1 Game Design Considerations</h2>
<p><a id="What-makes-a-good-game"></a></p>
<h3 id="111-what-makes-a-good-game">1.1.1 What makes a good game?</h3>
<p>If you're interested in making a game, you must have played a few games here and there. As you know, there isn't a definitive definition of what a "good" game is. A game that you think is amazing might be so-so to your friend, and vice versa. However, there are certain points of games that make them stand out from the crowd. Games that allow a player as much freedom as possible, within the rules of the game, is something that allows a game to shine. These rules, or the mechanics of the game, are essentially the rules of the world that you are creating will follow. Think about how in the real world, gravity keeps us on the ground, people need to eat food to survive, or that the day has 24 hours. </p>
<p>So, since you're interested in making games, let's think of a few things to consider before we delve into the world of creating them!</p>
<p><a id="Things-to-focus-on"></a></p>
<h3 id="112-things-to-focus-on-before-we-begin">1.1.2 Things to Focus on Before We Begin</h3>
<p>There are a few things to consider before diving headfirst into making your game. Depending on the size and scope of your game, your project can either be something you can make in a day to something that takes a year, or even longer! Thinking about the size of your game, as well as the complexity of it, can help you and your group plan out your steps when making your project. </p>
<p>Another important point to focus on is the core mechanic of your game. If you had to remove all of the extras from your game, such as power-ups, levels, story, characters, what would your game be? How will it play? And is that something that you can create for the platform you wish to build it for?</p>
<p>This tutorial will go through the steps of creating games that are pretty simple and uncomplicated. However, although most games today are more complex, many still use these basic underlying designs and mechanics. We will explain later what an MVP is, but this is something that will help you greatly when developing a finished product.</p>
<p><a id="how-we-develop-games"></a></p>
<h3 id="113-how-we-develop-games">1.1.3 How we Develop Games</h3>
<p>There are many ways to develop games. Some games arise out of a story that compels people to tell it. Others grow out of a gameplay feature that happens to be fun. In this lesson, we'll focus on developing a game with this latter approach: developing a mechanic and expanding on the game from that.</p>
<p><a href="#top" class="top" id="game-programming">Top</a></p>
<h2 id="12-game-programming">1.2 Game Programming</h2>
<p>A game is a piece of software, so programming patterns and concepts from other types of software are also common in games. However, a game in particular is a special type of program: a sort of simulation of a set of rules for the game universe. Because of this, the code structure for a game typically follows two patterns:</p>
<p><a id="game-loop"></a></p>
<h3 id="121-the-game-loop">1.2.1 The Game Loop</h3>
<p>In a game, the core of the logic is contained in a loop running indefinitely, with each run of the loop simulating a number of <em>steps</em> of the game universe, followed by a render of the universe, and then a delay keeps the simulation running at a reasonable speed (e.g., 60fps).</p>
<p><a id="update-method"></a></p>
<h3 id="122-the-update-method">1.2.2 The Update Method</h3>
<p>Most games involve entities, like players, enemies, or powerups, interacting with each other. To capture this, game engines typically divide game logic into packages called <em>objects</em>, each of which, in each step of the game universe, has its own behavior.</p>
<p>Depending on the game you want to make, the variety of programming, math, and physics concepts you might need to incorporate are endless, from pathfinding to gravity to finite state machines. The two key concepts that games use, though, are the <em>game loop</em> and <em>update method</em>. It's not that important to know exactly what they mean at this point, but try to keep these two ideas in the back of your mind as we see how Game Maker games are structured following this system.</p>
<p><a href="#top" class="top" id="MVP">Top</a></p>
<h2 id="13-minimum-viable-product">1.3 Minimum Viable Product</h2>
<p><a id="bare-bones"></a></p>
<h3 id="131-what-is-a-minimum-viable-product">1.3.1 What is a Minimum Viable Product?</h3>
<p>A Minimum Viable Product (henceforth 'MVP') is a bare bones version of your game. This is a stage where there will be no art or music in your game and usually the game will consist of one level or room of your game.</p>
<p><a id="uses-MVP"></a></p>
<h3 id="132-uses-of-the-mvp">1.3.2 Uses of the MVP</h3>
<p>This is used mainly in testing purposes to see if your mechanic works as intended. By having an MVP, you can work out any bugs, allow others to test your game's mechanic, and start tweaking things to your liking.</p>
<p><a href="#top" class="top" id="tools-used">Top</a></p>
<h2 id="14-game-development-tools">1.4 Game Development Tools</h2>
<p>Game developers use a plethora of tools for every component of the development process, from audio to visuals to 3D models to overall frameworks. Below are some tools popular in the industry, whether used by small indie studios to large triple-A producers.</p>
<p><a id="list-engines"></a></p>
<h3 id="141-game-engines">1.4.1 Game Engines</h3>
<p>Here's a list of some of the game engines that are frequently used:</p>
<ul>
<li>Unity - Unity is powerful and one of the most popular engine for production-level games.</li>
<li>Unreal Engine - Comparable to Unity but with its beginnings much earlier, Unreal Engine is known for many console releases like BioShock Infinite.</li>
<li>GameMaker - One of the oldest game development programs, GM retains its status as a good tool for <em>prototyping</em> and learning development, but also with a set of features that give it power comparable to the big players in 2-dimensional games.</li>
<li>RPG Maker - A popular choice for RPGs.</li>
<li>Twine - A popular choice for point-and-click and story games.</li>
</ul>
<p>The list goes on. Construct 2 is similar to GameMaker for web-based 2D games, while other more minimal frameworks like L&Ouml;VE and Phaser are also popular.</p>
<p><a id="list-tools"></a></p>
<h3 id="142-other-tools">1.4.2 Other tools</h3>
<p>Triple-A studios often have professional software for making visual and audio assets, like Autodesk Maya, Cubase, and Adobe Illustrator. For the more humble developers like us, a set of free software is available:</p>
<ul>
<li>Blender - 3D-modelling software, alternative to Maya</li>
<li>Audacity - Audio editor</li>
<li>GIMP - Graphics editor, alternative to Photoshop</li>
<li>Aseprite - Pixel art editor</li>
<li>GraphicsGale - Pixel art editor</li>
<li>BFXR - Sound effect generator</li>
</ul>
<p>A more complete list can be found <a href="http://ludumdare.com/compo/tools/">here</a>.</p>
<p><a href="#top" class="top" id="GM-main">Top</a></p>
<h2 id="15-gamemaker">1.5 GameMaker</h2>
<p>We'll be using GameMaker for the games we make in this guide.</p>
<p><a href="#top" class="top" id="GM-why">Top</a></p>
<h3 id="151-why-gamemaker">1.5.1 Why GameMaker?</h3>
<p>GM Studio on Windows is a great tool for development, with its frequent updates and cross-platform support. The built-in features it provides is good for getting rid of all the configuration and preprocessing needed to work in many other game engines, so it's fast to get a working prototype up. The model GM uses tries to be as simple as possible for non-programmers, too, and the learning curve is smooth, making it ideal for beginners.</p>
<p>It's a powerful program too, with a sizeable list of notable indie games built with it, like Hotline Miami, Spelunky, and Undertale.</p>
<p>GM for Mac, however, is based off an older version of GameMaker, so its functionality is limited. The game model and interface is nearly identical, though, so it's still a good way to learn the workings of game development and testing prototypes. It's worth using a different game engine or working on Windows for developing final products, though.</p>
<p><a href="#top" class="top" id="GM-parts">Top</a></p>
<h3 id="152-parts-of-gamemaker">1.5.2 Parts of GameMaker</h3>
<p>In GameMaker, a game is made up of various parts. Here we'll describe each part and their function on a very basic level before we move on to using them when making our basic game.</p>
<ul>
<li>Sprite - A graphic used to represent the object. This is what the player will see.</li>
<li>Sound - An audio resource, like an explosion sound effect or maybe background music.</li>
<li>Background - A graphic used for backdrops or parts of the game that don't involve a lot of logic.</li>
<li>Object - The actors in the game, like enemies in a shooter, or coins in a platformer. They contain game logic and usually have a sprite.</li>
<li>Room - An environment where you can put objects. Think "level" or "screen", as in menu screen or credits screen.</li>
</ul>
<p>Some more specific resources that we won't be getting into include:</p>
<ul>
<li>Path - Some objects you might want to follow a complicated movement pattern. You can define them with paths.</li>
<li>Timeline - Other objects might have a complicated sequence of actions they undergo. Timelines are for that.</li>
</ul>
<p><a href="#top" class="top" id="review-level1">Top</a></p>
<h3 id="16-lets-review">1.6 Let's Review!</h3>
<p>Now that we know some basic concepts of game programming and what an MVP is, let's review by having you perform a little exercise.</p>
<p>For this exercise, think of a game you want to make. Anything you want! You can either write out what you want to make or draw a diagram.</p>
<p>After you've done that, try to boil down your game into its core mechanic. Make it as simple as possible. This will be your MVP! Now, compare the MVP with your "final" product and see the differences between them.</p>
<p>Once you're done with these levels, you should be able to create your MVP in GameMaker.</p>
<p><a href="#top" class="top" id="top-down-shooter">Top</a></p>
<h1 id="level-2-a-top-down-shooter">Level 2: A Top-Down Shooter</h1>
<blockquote>
<p><strong>Goal</strong> - Create a basic game and get familiar with GameMaker.</p>
</blockquote>
<p>We'll be building a quick top-down shooter in GameMaker, and with the goal of seeing the features of GameMaker that combine game assets with logic to create a game. What features and commands does GameMaker have, and how are they organized in a GameMaker game? The shooter we make will be extremely basic, with enemies slowly coming down to the player's level. You can move horizontally and shoot upwards.</p>
<p>For Windows, when you first open GM Studio, you should see a window similar to the one in the screenshot below.
<img alt="GM Window" src="./images/shooter/start.png" /></p>
<p>Navigate to the "New" tab and select a location to put all the files related to the game we'll be making. GM studio projects are folders with extension .gmx, containing a main project file with an extension .project.gmx, and several subfolders for the game's resources. In addition it's possible to export and send the entire project as a single compressed .gmz file (File &gt; Export Project in the next window).</p>
<p>Once you select a name and location for your project, a window like the one below should pop up. Something similar to the window below should be the first window you see on Mac, after the little popup asking you to buy the full version. If GM asks if you want to enable advanced mode, answer yes.</p>
<p><img alt="GM Interface" src="./images/shooter/interface.png" /></p>
<p>The two types of assets&mdash;graphics and audio&mdash;are grouped into the first 3 folders on the left. As intuitive as the interface is (or tries to be), we'll give a quick walkthrough of adding sprites, sounds, and backgrounds to a project.</p>
<p><a href="#top" class="top" id="create-resource-sounds-sprites">Top</a></p>
<h2 id="21-creating-resources-sounds-and-sprites">2.1 Creating Resources - Sounds and Sprites</h2>
<p>In this section, we'll focus on creating and adding assets to our game.</p>
<p><a id="creating-a-sprite"></a></p>
<h3 id="211-creating-a-sprite">2.1.1 Creating a Sprite</h3>
<p>To create a sprite, either click the pac-man icon (<img alt="New Sprite" src="./images/shooter/new_sprite.png" />) in the top menu, or right-click the Sprites folder and select new sprite. The Sprite Properties window shows up.</p>
<p><img alt="Sprite Properties" src="./images/shooter/sprite_properties.png" /></p>
<p>Name the sprite something appropriate, like sPlayer, for a player sprite. To modify the actual graphic of the sprite, you can choose to load a premade image or edit the sprite yourself and click the appropriate button. We've provided sample sprites with the tutorial that you can load. If you prefer to make your own, click "Edit Sprite" to open up the Sprite Editor and click "New Sprite". Specify the dimensions, and double-click the "image 0" that's appeared in the sprite editor to open up the Image Editor and start drawing. After you load the image or draw your own, your Sprite Editor should look something like what's shown below.</p>
<p><img alt="Sprite Editor" src="./images/shooter/sprite_editor.png" /></p>
<blockquote>
<h5 id="mac-users">Mac Users</h5>
<p><img alt="Sprite Editor Mac" src="./images/shooter/m003.png" /></p>
<p>The sprite editor is slightly different, with the menu at the top of the screen instead of attached to the window. Furthermore, "New..." doesn't actually reset the sprite and create a new one, but instead adds a <em>subimage</em> which we'll get into later. If you click New... and specify a size you might end up with something like <a href="./images/shooter/m004.png">this</a>, with an Image 0 <em>and Image 1</em>. We don't want that at this point. The top menu allows you to delete subimages as well as resize your sprite. </p>
</blockquote>
<p>Save and close the editor and properties window&mdash;you're done with this sprite. Try to add another sprite to represent the player's bullets! A graphic is provided.</p>
<p>A background is similar. Create a background resource (right-click the folder or click <img alt="New Background" src="./images/shooter/new_back.png" />) and try to navigate the program to load our provided background or draw your own backdrop for our ultimate space battle. Bonus points if it tiles!</p>
<blockquote>
<h5 id="mac-users_1">Mac Users</h5>
<p>Sprites and backgrounds in Mac have limited transparency capabilities. If you want sprites that aren't opaque over the entire rectangle of the sprite, make sure you tick "Transparent". The way GM for Mac determines which pixels are transparent is by looking at the bottom-left pixel. The transparent color will be set to whatever color's in the bottom-left.</p>
<h5 id="sidenote">Sidenote</h5>
<p>In my opinion, GM's Image Editor is reasonably powerful but some things are hard to find, like resizing the canvas. (Resizing is particularly annoying because sprites can actually contain multiple subimages of the same size, to be used in e.g., animation, or different states of an object, like a stoplight with different images corresponding to different lights on.) For professional pixel art, consider drawing in GraphicsGale or Aseprite and then loading.</p>
</blockquote>
<p>The remaining options (origin, collision, texture) in the sprite properties dialog box have to do with how the rest of the game renders and interacts with objects with this sprite. We'll get into some of them later.</p>
<p><a id="adding-a-sound"></a></p>
<h3 id="212-adding-a-sound">2.1.2 Adding a Sound</h3>
<p>We've provided a sample shooting sound effect made in bfxr, and loading that as a resource is as simple as for the sprite. Creating a sound resource is a matter of navigating the interface. (Right-click the folder, or click <img alt="New Sound" src="./images/shooter/new_sound.png" />) For our purposes, just loading the sound and naming it properly (e.g., sShoot) is enough. The other settings don't need to be changed.</p>
<blockquote>
<h5 id="sidenote_1">Sidenote</h5>
<p>One thing you might notice is that Game Maker provides a lot of options and settings to tweak for each resource. This is just because Game Maker has a lot of built-in functionality for common game use-cases, which is partly why prototyping can be really fast with GM. We avoid these settings for now as we have no use for them, but the help manual goes into them pretty well if you're interested.</p>
<p>In addition, many settings shown in the screenshots might not be available in GM for Mac. In that case, don't worry. If we don't mention it in the text, the settings aren't changed, and the default functionality in GM for Mac is good enough.</p>
</blockquote>
<p><a href="#top" class="top" id="basic-game-logic">Top</a></p>
<h2 id="22-basic-game-logic">2.2 Basic Game Logic</h2>
<p>The main actors in GameMaker games are objects, which combine a sprite with game logic that is run on every step of the simulation. Objects are then placed in things called Rooms, which serve as an environment for objects to interact with each other and you in a game.</p>
<p><a id="minimal-program"></a></p>
<h3 id="221-a-minimal-program">2.2.1 A Minimal Program</h3>
<p>To see how this system works, let's create a player that can move around. First, create a new object resource (right-click the folder and select, or click <img alt="New Object" src="./images/shooter/new_object.png" />) and name it something appropriate, like <code>oPlayer</code>. Underneath the name, set the sprite to <code>sPlayer</code>.</p>
<p><img alt="Player Properties" src="./images/shooter/obj_player.png" />)</p>
<p>Then, create a room resource. In the Objects tab of the Room Properties window, select oPlayer, then click somewhere in the grid to place the player in the room (you can change the size of the grid with the SnapX and SnapY values at the top of the window). Then, in the settings tab, name the room rGame, change the width and height to 320x480, and FPS to 60.</p>
<p><img alt="Room Properties" src="./images/shooter/room_editor.png" /></p>
<p>Now that the room's been added, the game is minimally functional. In the main window menu, click the green triangle (<img alt="Play Game" src="./images/shooter/play.png" />) to test the game out. Your object will be there, motionless.</p>
<h5 id="checkpoint">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/shooter/1_minimal.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/shooter/1_minimal.gmk">here</a> for Mac.</p>
<p><a id="adding-motion"></a></p>
<h3 id="222-adding-motion">2.2.2 Adding Motion</h3>
<p>To implement motion, we can use Game Maker's built-in event-action functionality. Game Maker lets us program game logic into these objects by adding statements of the form, <code>when [EVENT], do [ACTIONS]</code>, like <code>when &lt;spacebar&gt; is pressed, shoot a bullet and play a sound</code> or in this case, <code>when &lt;left&gt; is pressed, move left.</code></p>
<p>To see how GameMaker provides this, in the Object Properties window of your player, click "Add Event" at the bottom, select "Keyboard" (not Keyboard press), and then "Left". A "press <Left>" event should pop up, representing the "When left is pressed..." part of the statement. Drag the action <img alt="Move to point" src="./images/shooter/act_move.png" /> on the right to the actions window, inputting setting <code>x</code> to <code>-3</code> and <code>y</code> to <code>0</code>, and ticking relative, to finish the statement with a "jump to your left 3 pixels."</p>
<p><img alt="Move Left" src="./images/shooter/move_left.png" /></p>
<blockquote>
<h5 id="sidenote-1">Sidenote 1</h5>
<p>Underneath the hood, GM is adding a piece of logic to the game's programming that checks if the left button is down at a particular instant and moves the player left if it is. This check isn't truly continuous because of the sequential nature of programs, but it's as close to continuous as possible. Specifically, this piece of logic is added to the object's update method, which is run once every time step, or simulation of the game loop, so <em>every frame, the program checks if left is pressed, and moves the player 3 pixels to the left if it is.</em></p>
<p>This abstraction&mdash;of associating a sequence of actions to an event for every object&mdash;is relatively powerful because of the wide variety of actions and events to choose from, but also easy to work with for people inexperienced with code.</p>
<h5 id="sidenote-2">Sidenote 2</h5>
<p>Every object has a pair of coordinates <code>(x, y)</code> representing its position, and GameMaker draws the sprite of the object at that position once every frame. The action we added moves the object <code>(-3, 0)</code> from where it was before, since we ticked relative. If we hadn't ticked relative, the object would teleport to the absolute location <code>(-3, 0)</code> (i.e., a bit to the left of the global origin, or top-left corner of the screen/room), and stay there, as soon as you pressed left.
(In the representation below, pressing left would move the ship to <code>(45, 44)</code> the next frame)</p>
<p><img alt="Coordinate System in GM" src="./images/shooter/coords.png" /></p>
<p>If you rerun the game, your player will slide to the left when you hold the left button down. Try to repeat with the other direction to give the player full horizontal mobility.</p>
</blockquote>
<p><a id="shooting"></a></p>
<h3 id="223-shooting">2.2.3 Shooting</h3>
<p>We can continue using these event-action pairs to make the player shoot bullets, and demonstrate how objects can interact.
First, create an oBullet object and assign the sBullet sprite to the object. In the oBullet object, we add a Create event and add a <img alt="vspeed" src="./images/shooter/act_vsp.png" /> action to set the vertical speed to -8. This means "when I'm spawned, set my speed to 8 pixels up every frame." Add another event, "Outside Room", and insert a <img alt="destroy" src="./images/shooter/act_destroy.png" /> action (accessible from the main1 tab on the right) to remove the bullet once it leaves the screen (so we don't simulate it any more than we need to).
Back in the oPlayer object properties box, add a press <Space> event (click Add Event, then Key Press, then Space) and put in there a <img alt="create" src="./images/shooter/act_create.png" /> action with object oBullet, position x = 12, y = 0, and with relative ticked. We can drag another action underneath,  from the main1 tab, and select to play the shoot sound we added earlier. Understandably, this spawns the bullet and plays a sound when space is pressed.</p>
<blockquote>
<h5 id="sidenote_2">Sidenote</h5>
<p><img alt="create" src="./images/shooter/act_create.png" /> creates a bullet at (12, 0) relative to the player position. The way we've set it up, this means that the bullet we create will be placed such that its top-left corner is 12 pixels to the right of the player's top-left corner (see the figure).</p>
<p><img alt="Origin corner" src="./images/shooter/origin_corner.png" /></p>
<p>If you're interested in avoiding these ugly numbers, take a look at sprite origins, which are special coordinates for each sprite, editable in the sprite properties window. When GM renders an object at a position (x, y), it draws the object's sprite so that the origin of that sprite is at (x, y). Sprites are created with origins at (0, 0). You can move the origin to the centre of the sprite by clicking "Center" on both the player and bullet sprites. Creating a bullet at (0, 0) relative to the player will then make the centre of the bullet align with the centre of the player, as desired.</p>
<p><img alt="Origin centre" src="./images/shooter/origin_center.png" /></p>
<p>(Green x shows origin of both bullet and player, which we now set to the centre of the sprite. Creating a bullet at (0, 0) relative to the player thus aligns the two origins)</p>
<p>The remainder of this shooter will keep sprite origins at (0, 0), but expect to use sprite origins in the next step&mdash;the platformer.</p>
</blockquote>
<h5 id="checkpoint_1">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/shooter/2_moveshoot.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/shooter/2_moveshoot.gmk">here</a> for Mac.
.</p>
<p><a id="object-interaction-enemies" href="file:///home/steven/Files/Desktop/Schoolwork/3/GameDev/curriculum/repo/build/top" id="#file:///home/steven/Files/Desktop/Schoolwork/3/GameDev/curriculum/repo/build/top">Top</a></p>
<h2 id="23-object-interaction-enemies">2.3 Object Interaction - Enemies</h2>
<p>By this point adding resources should be familiar. Just as we did with the player and its bullets, we can do the same with the enemy: creating a sprite resource, loading/drawing the graphic, and creating an object resource that uses the sprite.</p>
<p>We'll eventually make it so that the game periodically spawns enemies that slowly move down. One way to have the enemies move down is to program the enemies to have a downward speed upon creation: Add Event -&gt; Create, and drag the <img alt="vspeed" src="./images/shooter/act_vsp.png" /> action to the actions window, with a speed of 0.5 or so.</p>
<blockquote>
<h5 id="sidenote_3">Sidenote</h5>
<p>This is another built-in feature of GM. Just as every object has a position (x, y), every object has a horizontal and vertical speed (hspeed, vspeed), and every frame, the object's position is shifted by the speed. Setting the vertical speed to 1 would make the object move down a pixel every frame. As with position, ticking relative in the <img alt="vspeed" src="./images/shooter/act_vsp.png" /> action would instead add 1 to the current vertical speed of the object (it doesn't matter here since the object starts out stationary).</p>
</blockquote>
<p>Another behavior we might want is to have them disappear upon hitting a player bullet. This can be done with the collision event: In the oEnemy's Object Properties window, click Add Event -&gt; Collision -&gt; oBullet to include the event and drag the <img alt="destroy" src="./images/shooter/act_destroy.png" /> action (tab main1) to the actions window. Additionally we might want the bullet to be destroyed too, which we can do by dragging another <img alt="destroy" src="./images/shooter/act_destroy.png" /> and set the target to "Other" instead of "Self".</p>
<p><img alt="destroy other" src="./images/shooter/destroy_other.png" /></p>
<p>If we go to the room editor and drop enemies into the room, they'll appear and slowly move down, as well as react to our bullets, as expected.</p>
<blockquote>
<h5 id="sidenote_4">Sidenote</h5>
<p>One setting to pay attention to is the Delete Underlying checkbox. If it's checked, whenever you try to place an object on top of another object already placed in the room, the other object will be automatically deleted&mdash;which may be inconvenient at times. It's checked by default on Mac.</p>
</blockquote>
<h5 id="checkpoint_2">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/shooter/3_enemy.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/shooter/3_enemy.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="control-flow-variables-health">Top</a></p>
<h2 id="24-control-flow-and-variables-health">2.4 Control Flow and Variables - Health</h2>
<p>GM provides a scripting language to allow for traditional control flow structures, like conditionals and loops, but GM's drag-and-drop action system also has a simplified version for people new to code. </p>
<p>Every object is allowed to have any (reasonable) number of values associated with it, called variables, that store things like numbers, pieces of text, or other objects. Their use is what you'd expect: keeping track of, e.g., an individual's score in an arcade game, or status message in an MMO. We'll use variables to keep track of enemy health, so that 3 hits will destroy an enemy ship instead of just one.</p>
<p>While there's no explicit way to declare what variables you want an object to have up front, it's often a good idea to set, or initialize all of them in the Create event with the <img alt="var set" src="./images/shooter/act_var.png" /> action in the control tab. To start the enemy off with 3 health, use <img alt="var set" src="./images/shooter/act_var.png" /> to set <code>hp</code> (not <code>health</code>&mdash;see below) to 3 in the Create event. Since this is the first mention of the variable <code>hp</code>, it also tells GameMaker that this object has a variable called <code>hp</code>.</p>
<p><img alt="enemy hp" src="./images/shooter/enemyhp.png" /></p>
<blockquote>
<h5 id="sidenote_5">Sidenote</h5>
<p>GameMaker provides a built-in global variable (i.e., not different for each object) called health for player health. I guess it's there for people new to GM since there's a tab dedicated to these variables (score, health, lives), but they're no different from regular variables. We won't be using these global variables and indeed it's an inconvenience to have these variable names reserved by GM like that.</p>
</blockquote>
<p>In the collision with the bullet, we want to decrement <code>hp</code> and now only want to disappear if the health hits 0. To do this, we can <img alt="var set" src="./images/shooter/act_var.png" /> to set <code>hp</code> to -1, ticking relative. Then underneath, use a  <img alt="var check" src="./images/shooter/act_var2.png" /> to check if <code>hp</code> is equal to 0, and put the self-<img alt="destroy" src="./images/shooter/act_destroy.png" /> action right underneath the condition. The <img alt="var check" src="./images/shooter/act_var2.png" /> will skip the following action unless the condition is satisfied, so the enemy ship is only destroyed if the health reaches 0.</p>
<blockquote>
<h5 id="sidenote_6">Sidenote</h5>
<p>If you want a conditional item to apply to a block of events, you can use the <img alt="blocks" src="./images/shooter/blocks.png" /> items to specify how far the block should reach. We'll see an example of bigger conditionals in the explosion section.</p>
</blockquote>
<h5 id="checkpoint_3">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/shooter/4_enemyhp.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/shooter/4_enemyhp.gmk">here</a> for Mac.</p>
<p><a id="alarms-periodic"></a></p>
<h2 id="25-alarms-and-periodic-events">2.5 Alarms and Periodic Events</h2>
<p><a id="enemy-fire"></a></p>
<h3 id="251-enemy-fire">2.5.1 Enemy Fire</h3>
<p>We can do something analogous to the interaction between player bullet and enemy with an enemy bullet. Create a sprite resource for an enemy bullet, load the graphic, and associate it with a newly created object, naming it something like oEnemyBullet. We can program the player so that the game restarts (<img alt="restart" src="./images/shooter/act_restart.png" />, main2 tab) upon hitting an enemy bullet (or maybe after losing all its health), and then get the enemy to shoot every three seconds or so.</p>
<p>Perhaps the only vaguely new concept is the idea of an event happening periodically, for which Game Maker also has built-in functionality in the form of alarm events.</p>
<p>Alarms have two parts: an action that sets the alarm (<img alt="alarm" src="./images/shooter/act_alarm.png" />) and the event that's triggered when the alarm goes off. Internally, every object has a set of built-in alarm counters. the  action sets one of the counters for an alarm. The alarm counter then decrements every step, and when the counter reaches 0, the actions in the alarm event are triggered. For instance, to make an enemy shoot exactly one second after it's spawned, we can use <img alt="alarm" src="./images/shooter/act_alarm.png" /> in the Create event to set the enemy's Alarm 0 to 60 (assuming 60 FPS), and in the event Alarm 0, create an enemy bullet.</p>
<p>In our case, to have the enemy fire once every 3 seconds, we can have a <img alt="alarm" src="./images/shooter/act_alarm.png" /> action setting Alarm 0 to 180 in both the Create event and the Alarm 0 event, so that when the alarm fires, it also resets itself. In addition, in the Alarm 0 event, we create a bullet, and set the bullet to aim downwards in the bullet's create event.</p>
<p><img alt="shoot" src="./images/shooter/enemyshoot.png" /></p>
<blockquote>
<h5 id="sidenote_7">Sidenote</h5>
<p>GameMaker has a bunch of scripting functions you can embed in the properties of your actions so that the engine isn't completely restricted. For instance, we could set Alarm 0 to <code>150+random(30)</code> to set Alarm 0 to a random number from 150 to 180, instead of 180 every time. The manual included with GM has a reference on all of these functions, but it's more common to ask about or look up a certain desired behavior and learn about how GM accommodates it in an example.</p>
</blockquote>
<h5 id="checkpoint_4">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/shooter/5_enemyshoot.gmz">here</a> for Windows or <a href="./resources/checkpoints_mac/shooter/5_enemyshoot.gmk">here</a> for Mac.</p>
<p><a id="enemy-spawning"></a></p>
<h3 id="252-enemy-spawning">2.5.2 Enemy Spawning</h3>
<p>To create a constant stream of enemies for our game, we make an object that doesn't interact with the game at all besides creating enemies every once in a while. This pattern is common in engines where game logic is almost entirely in objects, and normally we call these background objects controller objects and use the prefix c instead of o.</p>
<p>Create a cEnemies (or cEnemySpawner) object without attaching a sprite, with an <img alt="alarm" src="./images/shooter/act_alarm.png" /> action in the Create and Alarm 0 event, along with an enemy create action in the Alarm 0 event, to produce enemies periodically.</p>
<p>To put the enemies at random positions, we can set the <code>y</code> to be <code>-32</code> and <code>x</code> to be <code>irandom(room_width-32)</code>, which generates a random integer from 0 to the coordinate of the rightmost side of the room every time it's called. This approximately evenly distributes the enemies.</p>
<blockquote>
<h5 id="mac-users_2">Mac Users</h5>
<p>GM for Mac has no <code>irandom(...)</code>. Instead, use <code>floor(random(...))</code>.</p>
</blockquote>
<p>Finally, put the controller object somewhere in the room. People normally put controllers in the top left, but we programmed this controller so its location doesn't matter. It pops up as a blue question mark, but that's only visible in the room editor.</p>
<blockquote>
<h5 id="sidenote_8">Sidenote</h5>
<p>The reason we set y to -32 is so that the bottom of the enemy are at <code>y = 0</code>, or the top of the screen, when they're spawned. Similarly, <code>room_width-32</code> is 32 pixels to the left of the right end of the room, so the farthest to the right the spawner can spawn is the position where the right side of the enemy touches the right edge of the room (the farthest to the left is <code>x = 0</code>, where the left end of the enemy touches the left edge of the room). </p>
</blockquote>
<h5 id="checkpoint_5">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/shooter/6_spawner.gmz">here</a> for Windows or <a href="./resources/checkpoints_mac/shooter/6_spawner.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="polish">Top</a></p>
<h2 id="26-polishing-up-our-game">2.6 Polishing up our Game</h2>
<p>We have a half-complete prototype for our shooter. Let's polish some of the rough edges to make it a little more presentable.</p>
<p><a id="backgrounds-rooms"></a></p>
<h3 id="261-backgrounds-in-rooms">2.6.1 Backgrounds in Rooms</h3>
<p>Unlike sprites, backgrounds aren't associated with objects, but rather with rooms. To add the starry night background to the game room, double-click the game room in the left-menu to open the Room Properties window, and navigate to the backgrounds tab. For Mac, you might have to <a href="./images/shooter/m001.png">click an extra button</a> to see it. Tick "Draw background color", "Visible when room starts", and the tiling checkboxes, and choose a color at the top and your background in the dialog box near the bottom. You can scroll down and set the vertical speed to 3 or so to make the background move down. </p>
<p><img alt="backgrounds" src="./images/shooter/backgrounds.png" /></p>
<blockquote>
<h5 id="sidenote_9">Sidenote</h5>
<p>Backgrounds are modifiable at any time by objects through a set of variables beginning with <code>background_</code>. Variables can be set using the <img alt="variable set" src="./images/shooter/act_var.png" /> action, or through a script, which we'll get into for the platformer, which is a step up in programming complexity.</p>
</blockquote>
<p><a id="animations-explosions"></a></p>
<h3 id="262-animations-explosions">2.6.2 Animations &amp; Explosions</h3>
<p>Precisely, sprites aren't just a single picture, but are made up of a set of graphics called subimages (with the same dimensions) along with other properties like a hitbox or an origin. People usually achieve animated graphics using sprites by using multiple subimages and then playing through the subimages.</p>
<p><img alt="parts of a sprite" src="./images/shooter/parts_sprite.png" />
<img alt="parts of a sprite mac" src="./images/shooter/m000.png" /></p>
<p>In the Sprite Editor, one can add an empty subimage at the end of the sequence with the  button and then double-click the subimage to edit it. Alternatively, one can load from a strip of subimages, like the one of the explosion we provided. In the Sprite Editor, File -&gt; Create From Strip opens a dialog box that extracts subimages from a sheet of images. Our sprite sheet has 7 images and 7 images per row, with all other settings unchanged. To see how the animation plays out, you can tick the "show preview" checkbox in the Sprite Editor. (Recall for Mac that <a href="./images/shooter/m002.png">the menu is at the top of the window</a>)</p>
<p><img alt="load strip" src="./images/shooter/load_strip.png" /></p>
<p>Using our animated sprite is a matter of making a new object and assigning the explosion sprite to it. When an object has a sprite with multiple subimages, the subimages automatically play (and loop) at whatever FPS the room is set to. Thus, the single behavior to add to the explosion object is a self-<img alt="destroy" src="./images/shooter/act_destroy.png" /> when the animation ends, accessible from Add Event -&gt; Other. Other objects like the enemy can create explosion objects in the event of hitting a player bullet.</p>
<p><a id="other-suggestions"></a></p>
<h3 id="263-other-suggestions">2.6.3 Other Suggestions</h3>
<p>There are a lot more things that could be done to make the game more presentable, like generating more sounds (e.g., with bfxr) or restricting the player from moving outside of the screen, which can be done by only allowing rightward movement if the player <code>x</code> is less than <code>room_width-32</code>, and only allowing leftward if the player x exceeds 0. </p>
<p>One other thing you may notice is that the game isn't very fun. Try to tweak the game to make it challenging! Make the game restart when an enemy reaches the bottom of the screen, or touches you. Change the enemy bullet pattern, perhaps aiming at the player instead of downwards (use <img alt="move in direction" src="./images/shooter/act_dir.png" /> in the bullet Create event, with direction <code>point_direction(x, y, oPlayer.x, oPlayer.y)</code>). Maybe also limit how many bullets there can be on the screen by preventing the player from shooting if there are too many (using <img alt="count number" src="./images/shooter/act_count.png" /> in the control tab). Get the enemies to move horizontally too, bouncing against the sides of the room, or add your own gimmick after exploring the actions GameMaker has. </p>
<h5 id="checkpoint_6">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/shooter/7_extras.gmz">here</a> or <a href="./resources/checkpoints_mac/shooter/7_extras.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="MVP-review">Top</a></p>
<h2 id="27-a-few-last-words">2.7 A Few Last Words</h2>
<p>Game Maker tries to make it simple to make simple games. Where there isn't a lot of complex logic, programming and gathering the assets is a matter of navigating the menus and specifying what to do at certain events. </p>
<p>GM is powerful too, though, with many layers of complexity underneath. Logical control flow in an object can get complicated too with conditionals and variables to manage. GM also has a scripting language that lets you implement complex behaviors as well as bypass the built-in crutches provided for the beginner.</p>
<p>While it would be a chore to go through the enormous list of functions and actions GM provides, there are many tutorials online for specific behaviors. As you go through examples, you'll naturally pick up and learn how each useful function/action is used in games.</p>
<p>In the next tutorial, we'll go through the scripting capabilities of Game Maker and look at some more general considerations in game programming.</p>
<p><a href="#top" class="top" id="level3">Top</a></p>
<h1 id="level-3-making-a-platformer">Level 3: Making a Platformer</h1>
<blockquote>
<p><strong>Goal</strong> - Learn more about the features of GM, familiarize with the game programming mindset, and make a basic platformer.</p>
</blockquote>
<p>In this platformer tutorial we'll take a different approach with GM, instead limiting ourselves to just a few of the built-in features related to resources and coding the rest ourselves, to get a feel for how GameMaker works underneath the event-driven model (and how game engines in general work), and look a bit at some of the problems games programmers face in implementing mechanics.</p>
<p>This section in particular will be a little more math-oriented as we figure out how to get our player to behave and move exactly how we want. </p>
<p><a href="#top" class="top" id="resource-setup">Top</a></p>
<h2 id="31-resource-setup">3.1 Resource Setup</h2>
<p>Create and load the player and enemy sprite, as well as the background. Also load the background tileset, checking "Use as tileset" in the background properties. Alternatively, draw your own if you feel brave, but try to keep the poses similar and the image dimensions 16x16. In addition, create a 16x16 black square to represent the blocks our player is going to interact with, and create the corresponding <code>oBlock</code> object. The black sprite box is just for the level editor and won't be what the player sees, though; we'll cover the blocks up later with a tileset to make it visually pleasing. </p>
<blockquote>
<h5 id="mac-users_3">Mac Users</h5>
<p>Remember to untick "Transparent" on the player and enemy sprite, since their bottom-left corners are grey, the same color as the rest of their sprite.</p>
</blockquote>
<p><a href="#top" class="top" id="scripts-step-events">Top</a></p>
<h2 id="32-scripts-the-step-event">3.2 Scripts &amp; the Step Event</h2>
<p><a id="step-event"></a></p>
<h3 id="321-the-step-event">3.2.1 The Step Event</h3>
<p>Game Maker exposes the update method of every object through the Step event. That is, unlike actions in keyboard press events, which are only triggered on the single frame the keyboard button is pressed, actions in the step event are run every frame the object exists. Most, if not all event action pairs could be reduced to a set of actions in only the step event. For instance, you could have an enemy disappear upon hitting your bullet by using the <img alt="collision" src="./images/platformer/act_collision.png" /> against the bullet and following that with a <img alt="destroy" src="./images/platformer/act_destroy.png" /> in the enemy's step event. The logic is the same: "When I hit a bullet, destroy myself" is the same as "At each frame, do this: if I am touching a bullet, destroy myself." Again, the emphasis with these patterns is the continuous repetition of blocks of code that aren't as common in traditional sequential programs.</p>
<p><a id="GM-language"></a></p>
<h3 id="322-the-gamemaker-language">3.2.2 The GameMaker Language</h3>
<p>In the control tab, Game Maker provides the <img alt="code" src="./images/platformer/act_code.png" /> action, which really opens up the full functionality of the tool by giving access to all the programming functions. The code editor has tooltips as well as syntax checking and highlighting. The language itself is C-like, but without explicit type (ints, doubles, strings default) and more merciful of traditional syntactic errors (e.g., code will compile without a semicolon; you can do things like <code>if x = 5</code>). There are a few things that someone with a programming background might cringe at, but I personally think the conveniences GM provides (in the form of resource management, collision detection, room editing, useful built-in variables, etc.) outweighs any sort of annoyances in GM's code interface.</p>
<p><img alt="example code" src="./images/platformer/code.png" /></p>
<p>With these two tools, we can reduce any object behavior to a single <img alt="code" src="./images/platformer/act_code.png" /> in the step event, and possibly another in the Create event (for setup) and Destroy event (for cleanup). However, it's still useful to divide logic into different events and actions if possible, if only just to better organize and clarify the object's behavior.</p>
<p><a id="GM-defaults"></a></p>
<h3 id="323-the-gamemaker-defaults">3.2.3 The GameMaker Defaults</h3>
<p>Game Maker has a bunch of options that might look relevant for our platformer, like "Uses Physics" (Windows only) or "Solid" in the Object Properties window. One of them uses a powerful 2D physics engine, but it's overkill for our purposes. The other is a very naive collision system that would result in an annoying, broken platforming engine. It would make you sad.</p>
<p><img alt="settings" src="./images/platformer/settings.png" /></p>
<p><a href="#top" class="top" id="horizontal-movement">Top</a></p>
<h2 id="33-horizontal-movement">3.3 Horizontal Movement</h2>
<p>We'll start by giving the player the ability to move left and right.</p>
<p><a id="first-attempt"></a></p>
<h3 id="331-a-first-attempt">3.3.1 A First Attempt</h3>
<p>For instantaneous speed, we can add the following piece of code to a <img alt="code" src="./images/platformer/act_code.png" /> action in the Step event of the player:</p>
<pre><code>if (keyboard_check(vk_left))
    x -= 4;

if (keyboard_check(vk_right))
    x += 4;
</code></pre>
<p>That is, in each frame, the program checks if the left key is pressed or not. If it is, the player jumps to the left 4 pixels. Analogously for the right key. To be precise, <code>keyboard_check(...)</code> is a function provided by GM taking in a key code and returning whether it's down or not. </p>
<p>If you put the player in a room (appropriately set up: 320x240, 60fps, background) and run the game, you'll see that pressing left moves the player left and right right, as expected.</p>
<blockquote>
<h5 id="sidenote_10">Sidenote</h5>
<p>If you want the window to be bigger and everything zoomed in, check out the Views section near the bottom of the tutorial.</p>
</blockquote>
<h5 id="checkpoint_7">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/1_minimal.gmz">here</a> for Windows or <a href="./resources/checkpoints_mac/platformer/1_minimal.gmk">here</a> for Mac.</p>
<p><a id="smooth-movement"></a></p>
<h3 id="332-smooth-movement">3.3.2 Smooth Movement</h3>
<p>Most platformers consider player acceleration and deceleration. In a smooth platforming engine, we'd expect pressing a horizontal to gently accelerate the player in that direction up to a maximum speed, releasing that direction to slowly decelerate the player, and pressing the opposite direction to shift towards that opposite direction. </p>
<p>We can model this using two speeds&mdash;a rightward speed and a leftward speed&mdash;each individually controlled by the corresponding key.</p>
<p>To define and initialize object member variables, we can simply assign values to them in the Create event: </p>
<pre><code>/// initialize variables
rspeed = 0;
lspeed = 0;
accel = 0.2;
maxspeed = 3.5;
</code></pre>
<p>(Putting 3 slashes in the first line replaces the default \93Execute Code\94 action description with the text of the first line)</p>
<blockquote>
<h5 id="technical-sidenote">Technical Sidenote</h5>
<p>The object-oriented mind may notice that even though the last two variables are actually constants (at least, for our purposes) specific to all player objects, it's common practice to group these with other member variables. This may be a little unsettling, but it's the best solution given GM's restricted capabilities (as far as I know). Further, the idea and purpose of an object in games are slightly different than in traditional OOP cases; these represent packages of code that are simulated according to a ruleset, not so much possible interfaces or services for other users or other classes, and the people who do work with your object's code are much less likely to want to break it. Magic numbers are still bad for the same reasons as in other programs, so we define variables here.</p>
</blockquote>
<p>To have the right key control <code>rspeed</code> and the left control <code>lspeed</code>, we put, in the Step event:</p>
<pre><code>if (keyboard_check(vk_right)) rspeed += accel;
else rspeed -= accel;
if (keyboard_check(vk_left)) lspeed += accel;
else lspeed -= accel;
</code></pre>
<p>We can then restrict the two speeds by appending:</p>
<pre><code>if (rspeed &gt; maxspeed) rspeed = maxspeed;
if (rspeed &lt; 0) rspeed = 0;
if (lspeed &gt; maxspeed) lspeed = maxspeed;
if (lspeed &lt; 0) lspeed = 0;
</code></pre>
<p>(Would it matter if this second block were placed before the first? Try it out, and think about what happens, if anything happens at all, keeping in mind that this is just code that's run once per frame)</p>
<p>And finally, append <code>hspeed = rspeed - lspeed</code>. GM automatically does <code>x += hspeed</code> at the end of every step (if that's not your thing, write <code>xspeed = rspeed - lspeed</code> and do <code>x += xspeed</code> yourself).</p>
<p>If you rerun the game, you'll notice that while we haven't done anything fancy to simulate physical forces like friction or drag, the player's movement is a lot smoother and closer to the movement mechanics of, say, Super Mario Bros, or Spelunky.</p>
<p><a href="#top" class="top" id="vertical-movement">Top</a></p>
<h2 id="34-vertical-movement">3.4 Vertical Movement</h2>
<p>The vertical movement in a platformer is governed by gravity, which is usually a constant downwards acceleration. In addition to that, the player should be able to jump. For this section, we'll add gravity but no ground, and instead give the player the ability to jump in the air.</p>
<p><a id="gravity"></a></p>
<h3 id="341-gravity-jumping">3.4.1 Gravity &amp; Jumping</h3>
<p>A constant downward acceleration translates to a continuous addition of downward speed. We can do this by defining <code>grav = 0.23</code> in the Create event and then <code>vspeed += grav</code> in the Step event.</p>
<p>Jumping is usually an upward burst of motion. We can implement jumping with another constant in the step event, <code>jumpspeed = 6</code>, and a simple key check in the Step event:</p>
<pre><code>if (keyboard_check_pressed(vk_up)) vspeed = -jumpspeed;
</code></pre>
<blockquote>
<h5 id="sidenote_11">Sidenote</h5>
<p>Though we'll eventually make it so that the player can only jump if it's on the ground (i.e., <code>vspeed</code> is 0 initially), in games with multiple jumps, the player's second jump isn't affected by how the player's moving before the second jump, so we say <code>vspeed = -jumpspeed</code> instead of <code>vspeed -= jumpspeed</code> (of course, this is all up to how you want jumping to work in your game).</p>
</blockquote>
<p><a id="stopping-your-jump"></a></p>
<h3 id="342-stopping-your-jump">3.4.2 Stopping Your Jump</h3>
<p>Often in platformers, one can control the player's jump height by releasing the jump key early or late. There are many ways to implement this underneath. For instance, one could halve the player's upward velocity when the jump key is released:</p>
<pre><code>if (vspeed &lt; 0 &amp;&amp; keyboard_check_released(vk_up)) vspeed /= 2;
</code></pre>
<p>Or, for a smoother motion, consider applying a stronger gravity (something like <code>grav2 = 0.35</code> in the Create event) while the player's moving upwards if the jump button isn't pressed:</p>
<pre><code>if (vspeed &lt; 0 &amp;&amp; !keyboard_check(vk_up)) vspeed += grav2; else vspeed += grav;
</code></pre>
<blockquote>
<h5 id="sidenote_12">Sidenote</h5>
<p>GM does not have the <a href="https://en.wikipedia.org/wiki/%3F:">conditional operator</a> (<code>a ? b : c</code>). Sorry.</p>
</blockquote>
<h5 id="checkpoint_8">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/2_smooth.gmz">here</a> for Windows or <a href="./resources/checkpoints_mac/platformer/2_smooth.gmk">here</a> for Mac.</p>
<p><a id="walking-animation"></a></p>
<h3 id="343-walking-animation">3.4.3 Walking Animation</h3>
<p>If you loaded all 4 subimages of the player sprite, you might want to have the player animation correspond to your movement. The variables GM provides to control the displayed subimage of a sprite are <code>image_index</code>, the subimage index, and <code>image_speed</code>, the speed at which image_index changes. A speed of 1 means every frame, the index advances; 0.5 would mean updating the subimage once every two frames.</p>
<p>If we wanted to have the animation play at a speed according to how fast we were moving, we might do something like <code>image_speed = 0.05*hspeed</code>.</p>
<p>To get the player to change the direction he's facing, a common solution is to create another sprite sPlayerL with the graphics mirrored and then set the player's sprite according to his velocity, using GM's built-in variable <code>sprite_index</code>. Something in the Step event like</p>
<pre><code>if (hspeed &gt; 0) sprite_index = sPlayer;
else sprite_index = sPlayerL;
</code></pre>
<blockquote>
<h5 id="sidenote_13">Sidenote</h5>
<p>Alternatively, GM provides variables <code>image_xscale</code> and <code>image_yscale</code>, which, as the names suggest, define how the sprite should be scaled when it's rendered. Normally, they're set to 1, but having <code>image_xscale = 0.5</code> would squish the sprite so its width were half what it is usually. Setting it to a negative value flips the sprite, so when moving left, we can set <code>image_xscale = -1</code> to face the player left. The complication with this is that this is literally scaling with respect to the origin of the player sprite, so if we flipped the sprite, the box would teleport to the left 16 pixels (see figure). We want to put the origin somewhere so that if we flip the sprite, the image doesn't shift any amount (see figure). This happens when the origin's x is centred (i.e., origin is at <code>(8, 0)</code>).</p>
<p><img alt="origin flipping" src="./images/platformer/origin_scale.png" /></p>
<p>A slick (and/or disgusting) way to do it is this line in the Step:</p>
<pre><code>if (hspeed != 0) image_xscale = sign(hspeed);
</code></pre>
<h5 id="mac-users_4">Mac Users</h5>
<p>Duplicate and mirror the player sprite with an sPlayerL, instead of using <code>image_xscale</code>, otherwise the hitbox will be off by one no matter how you align it, and the player will shake upon hitting a wall.</p>
</blockquote>
<h5 id="checkpoint_9">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/3_animation.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/platformer/3_animation.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="platform-collision">Top</a></p>
<h2 id="35-platform-collision">3.5 Platform Collision</h2>
<p>This is the more technically challenging part of platformer physics: determining collision detection and response. Roughly, we want to implement a statement like "If the player hits a block, stop the player from moving into the block and set his velocity accordingly."</p>
<p>This encompasses a lot of cases. What should happen if the player hits the bottom of a block? What if he lands on a block? Or if he hits the side of a block? And what about if he hits the exact corner of a block?</p>
<p>A simple observation we can make is that unless we want to add friction or wall-sliding, a player hitting the side of a block only affects it his horizontal velocity, and a player hitting the top or bottom of a block only affects his vertical. We can therefore try to approach the two directions separately.</p>
<p>The relevant set of functions is <code>instance_place(x, y, other)</code> and <code>place_meeting(x, y, other)</code>, which check if an object <code>this</code> calling <code>place_meeting</code> would touch <code>other</code> if <code>this</code> were moved to position <code>(x, y)</code>. This is equivalent to moving <code>this</code> to <code>(x, y)</code>, then checking if the hitboxes (as defined by the sprites of the two objects) overlap, and then moving <code>this</code> back to its original position. <code>instance_place</code> returns the object that may be touching (or else noone), and <code>place_meeting</code> returns whether or not there's an object touching. We'll give some examples to clarify, including a very basic one right below. </p>
<p><img alt="place meeting" src="./images/platformer/place_meeting.png" /></p>
<p>In the figure above, <code>place_meeting(x+10, y, oBlue)</code> from <code>oRed</code>'s object code would return <code>true</code> because moving oRed to the position <code>(x+10, y)</code> (10 pixels to the right) would make an intersection with <code>oBlue</code>. On the other hand, <code>place_meeting(x+5, y, oBlue)</code> would return <code>false</code>, since <code>oRed</code> would not be touching <code>oBlue</code> if <code>oRed</code> moved right 5 pixels.</p>
<p><a id="landing-block"></a></p>
<h3 id="351-landing-on-a-block">3.5.1 Landing on a Block</h3>
<p>Recall that update methods and the game loop try to simulate a ruleset for the universe of our game by running a block of code almost continuously&mdash;once every frame. We can't enforce the statement, "Don't let the player fall through a block when he lands on it" directly, but we can ask each frame if he's landed on the block, and if he has, change the player's motion and position accordingly. </p>
<p>The way we can do this with GM is to check, in the update method, whether or not the player would fall into a block the next frame. This is a matter of moving the player to where it would be next frame, and seeing if the player's hitbox in that position overlaps with the block's. This can be captured with the condition <code>if (place_meeting(x+hspeed, y+vspeed, oBlock))</code> at the end of the other movement code, because the player's position next frame is (x+hspeed, y+vspeed). If the condition passes, we know that unless we do something, next frame, the player will be stuck in a block.</p>
<blockquote>
<h5 id="sidenote_14">Sidenote</h5>
<p>Why wouldn't this condition work if it were placed at the beginning of the step event? </p>
</blockquote>
<p>What we need to do is twofold:
1. Stop the player from continuing to fall by setting the vspeed to 0.
2. Reposition the player so that next frame, instead of being inside the block, he's instead right on top of the block. </p>
<p>This is shown in the figure below, with what happens if we don't do anything (red arrow), and what happens if we perform steps 1 and 2.</p>
<p><img alt="landing" src="./images/platformer/howtoland.png" /></p>
<p>To determine how to reposition the player, consider the figure, which labels the origins of the player and the block. We want the bottom of the player to line up with the top of the block, and in order to do that, the player's origin must be 16 pixels (the player sprite height) above the block's.</p>
<p><img alt="landing" src="./images/platformer/land.png" /></p>
<pre><code>y = (y position of the block i'm touching) - (sprite height)
</code></pre>
<blockquote>
<h5 id="sidenote_15">Sidenote</h5>
<p>If you moved the origins of the player and block around, it's a little more complicated, but doable with the instance variables <code>sprite_xoffset</code> and <code>sprite_yoffset</code>. We want the bottom of the player to line up with the top of the block, i.e.,</p>
<pre><code>y - sprite_yoffset + sprite_height = block's y - block's sprite_yoffset
</code></pre>
<p>Rearranging into an equation that sets the player's y, we get</p>
<pre><code>y = (y of block i'm touching) - (sprite_height) + (sprite_yoffset) - (y of block i'm touching's sprite_yoffset)
</code></pre>
<h5 id="sidenote_16">Sidenote</h5>
<p>If in addition, you resized the sprite hitboxes (which you probably didn't), you may need to avoid hard-coding the hitbox offsets or use a different approach, as GM doesn't provide hitbox dimensions and offsets (it doesn't work if the sprite hitbox setting were elliptical, or pixel-perfect). One way may be to use a loop to nudge the player upwards until he doesn't overlap with the block anymore, but it would have to be carefully written so that the player doesn't get nudged over the edge of the block.</p>
</blockquote>
<p>To summarize, we have the following block of code to make the player behave appropriately when he's about to fall onto a block:</p>
<pre><code>z = instance_place(x+hspeed, y+vspeed, oBlock);
if (z != noone) {
    vspeed = 0;
    y = z.y - abs(sprite_height);
    // or z.y - abs(sprite_height) + abs(sprite_yoffset) - abs(z.sprite_yoffset)
}
</code></pre>
<blockquote>
<h5 id="sidenote_17">Sidenote</h5>
<p><code>sprite_width</code>, <code>sprite_height</code>, <code>sprite_xoffset</code>, and <code>sprite_yoffset</code> are multiplied by <code>image_xscale</code> and <code>image_yscale</code>, so e.g. if the sprite had size 16x16 and the origin were at <code>(8, 0)</code>, and <code>image_xscale</code> were -1, <code>sprite_width</code> would be -16, and <code>sprite_xoffset</code> would be -8. This is why we put an absolute value.</p>
</blockquote>
<p>To keep it so that the player stays on the block, we can just put this block of code just under the line that applies gravity. If the player is already on the block, with the way we order our code, each frame will try to apply gravity but then instantly negate it.</p>
<h5 id="checkpoint_10">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/4_landing.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/platformer/4_landing.gmk">here</a> for Mac.</p>
<p><a id="hitting-block-bottom"></a></p>
<h3 id="352-hitting-a-block-from-the-bottom">3.5.2 Hitting a Block from the Bottom</h3>
<p>If you put a few blocks in the room and test the game out, you'll notice that no matter which direction you hit the block from, the player will always teleport above the block. We'll now cover the other vertical direction.</p>
<p>But how can our code tell if the player hit the block from the top or bottom? Our current code simply checks for an overlap and puts the player on top of the block if there is. A few solutions:</p>
<ol>
<li>Assuming the player isn't currently overlapping with the block, if the player would hit the block next frame, the player must be hitting the top of the block if he's moving down (vspeed &gt; 0) and the bottom if he's moving up (vspeed &lt; 0).</li>
<li>We can just check if the player is above (y &lt; z.y) or below (y &gt; z.y) the block.</li>
</ol>
<p>If we want to add more functionality in the future we should use the second method, as it more directly relates to the question we're asking. What if we want to add moving platforms later that cause a hitbox overlap? If the player's moving up while on top of the platform, the first check would fail.</p>
<p><img alt="hitting from bottom" src="./images/platformer/hitbottom.png" /></p>
<p>As with landing on a block, we want to set the vspeed to 0 so the player doesn't phase through the block. To find where to reposition the player to, it may be helpful to make a figure:</p>
<p>In this case, the top of the player should intersect with the bottom of the block. We use</p>
<pre><code>y = z.y + abs(z.sprite_height) \\ + abs(sprite_yoffset) - abs(z.sprite_yoffset)
</code></pre>
<p>Our final vertical collision code is</p>
<pre><code>z = instance_place(x+hspeed, y+vspeed, oBlock);
if (z != noone) {
    vspeed = 0;
    if (z.y &gt; y) y = z.y - abs(sprite_height) + abs(sprite_yoffset) - abs(z.sprite_yoffset);
    else y = z.y + abs(z.sprite_height) + abs(sprite_yoffset) - abs(z.sprite_yoffset);
}
</code></pre>
<p><a id="hitting-block-side"></a></p>
<h3 id="353-hitting-the-side-of-a-block">3.5.3 Hitting the Side of a Block</h3>
<p>When the player hits the side of the block, he should stop all horizontal movement, both left and right, and be repositioned so he is next to the block. This is essentially the same as vertical collision, except heights are replaced with widths, and y with x.</p>
<pre><code>z = instance_place(x+hspeed, y+vspeed, oBlock);
if (z != noone) {
    hspeed = 0;
    lspeed = 0;
    rspeed = 0;
    if (z.x &gt; x) x = z.x - abs(sprite_width) + abs(sprite_xoffset) - abs(z.sprite_xoffset);
    else x = z.x + abs(z.sprite_width) + abs(sprite_xoffset) - abs(z.sprite_xoffset);
}
</code></pre>
<p>Replace the vertical collision detection code with this to see the player react horizontally upon touching a block, though it may be hard and awkward to test as the player can't land any more.</p>
<p><a id="horizontal-vertical"></a></p>
<h3 id="353-horizontal-or-vertical-collision">3.5.3 Horizontal or Vertical Collision?</h3>
<p>If you put both chunks of code in after the regular motion portion of the step event, you'll notice that only the first chunk affects the player's movement. This is because both checks are the same, and the first check moves the player out of the way of the block. By the time we reach the second check, there's no block to react to, and thus no further adjustment is made.</p>
<blockquote>
<h5 id="spoiler">Spoiler</h5>
<p>To fix this, one can just change the check in the first chunk of collision code from <code>(x+hspeed, y+vspeed)</code> to either <code>(x+hspeed, y)</code> if the first check is the horizontal adjustment, or <code>(x, y+vspeed)</code> if vertical. To see why, see below.</p>
</blockquote>
<p>We need our code to decide whether a given collision is vertical or horizontal. One way is to compare the relative positions of the block and player, as we did to see if a collision was on the top or bottom.</p>
<p><img alt="quadrants" src="./images/platformer/quadrants.png" /></p>
<p>(I.e., divide the block into quadrants, and do a calculation that determines the quadrant the player covers the most when he touches the block)
But this is a hassle to compute as the player collides closer and closer to a corner of the block, especially if the player's origin or hitboxes are shifted. Instead, we can make two other checks: collision against the block at <code>(x+hspeed, y)</code>, and at <code>(x, y+vspeed)</code>, visualized below.</p>
<p><img alt="3 checks" src="./images/platformer/3check.png" /></p>
<p>If the player is going to be hit a block from the side (figure above), the player will most likely intersect the block if the player moves to position <code>(x+hspeed, y)</code>, and we can react with our horizontal collision code in this case. Similarly if the player is going to hit a block from the top or bottom, there'll probably be an intersection for <code>(x, y+vspeed)</code> and we can apply vertical collision there.</p>
<p>(Figure: hitting from top)</p>
<p><img alt="vertical check" src="./images/platformer/vcheck.png" /></p>
<p>(Figure: hitting from corner)</p>
<p><img alt="corner check" src="./images/platformer/cornercheck.png" /></p>
<p>If the player hits from a corner, though, neither of the two checks will report a collision, and nothing will be done. Our player will end up in a block. This case is extremely rare for any platformer with a reasonable resolution/framerate, and requires a very precise jump. This is why we have our third check, and in this case, we can apply either horizontal or vertical correction. We'll be nice and put the player on top (or bottom) of the block if he meets the block at a corner. </p>
<p>A summary of our code:</p>
<pre><code>if (hit block at (x+hspeed, y)) apply horizontal correction;
if (hit block at (x, y+vspeed)) apply vertical correction;
if (hit block at (x+hspeed, y+vspeed)) apply vertical correction;
</code></pre>
<p>A simplification would be to remove the second line entirely, since the second line rarely fires without the third also firing&mdash;only when the player grazes the block from the top almost pixel-perfectly, which is unnoticeable to the player.</p>
<p>Our final code:</p>
<pre><code>z = instance_place(x+hspeed, y, oBlock);
if (z != noone) {
    hspeed = 0;
    lspeed = 0;
    rspeed = 0;
    if (z.x &gt; x) x = z.x - abs(sprite_width) + abs(sprite_xoffset) - abs(z.sprite_xoffset);
    else x = z.x + abs(z.sprite_width) + abs(sprite_xoffset) - abs(z.sprite_xoffset);
}

z = instance_place(x+hspeed, y+vspeed, oBlock);
if (z != noone) {
    vspeed = 0;
    if (z.y &gt; y) y = z.y - abs(sprite_height) + abs(sprite_yoffset) - abs(z.sprite_yoffset);
    else y = z.y + abs(z.sprite_height) + abs(sprite_yoffset) - abs(z.sprite_yoffset);
}
</code></pre>
<p><a id="jump-right-time"></a></p>
<h3 id="354-jumping-at-the-right-time">3.5.4 Jumping at the Right Time</h3>
<p>At this point we can restrict the player so he can only jump if he's touching the ground. We can replace our current jump line with something like:</p>
<pre><code>if (keyboard_check_pressed(vk_up) &amp;&amp; place_meeting(x, y+1, oBlock)) vspeed = -jumpspeed;
</code></pre>
<p>so that the player is only allowed to jump if he's on the ground (i.e., a block sits at most one pixel below him).</p>
<p><a id="optional-quirk"></a></p>
<h3 id="356-optional-a-quirk-with-gm">3.5.6 Optional: A Quirk with GM</h3>
<p>(This happens in the latest version of GM studio on Windows. Not sure about earlier versions. Feel free to scroll to the bottom for the solution, or maybe this doesn't even affect you)</p>
<p>If you look carefully, you might see your player vibrate as he stands (if you're zoomed in, and your player accel and grav have 2 decimal places). This is especially obvious if you have him move left against a wall and watch him turn. This is sadly a small problem with GM's collision detection: it does rounds down object coordinates before checking in instance_place. </p>
<p>Over the course of two game loops, the player moves from right above the block to slightly inside the block and back out. The first movement is because the player is pulled down slightly from gravity, over less than a pixel. GM does the collision check, testing the player's original position (because of rounding down), and sees that nothing's there, even though we can clearly see the player overlapping with the block. From this position, moving another few fractions of a pixel down would put it over a pixel beneath its original position, and GM detects that, moving the player back to right above block.</p>
<p>We have no avenue to get GM to test fractional positions, but we don't need to if we round the positions we test ourselves to make sure we're testing the right spots. For instance, in the case described above, this wouldn't be a problem if GM rounded up. In general we'd like to round up if the player's moving right/down, and down if the player's moving left/up. Define a few variables:</p>
<pre><code>var xrounded; if (hspeed &gt; 0) xrounded = ceil(x+hspeed); else xrounded = floor(x+hspeed);
var yrounded; if (vspeed &gt; 0) yrounded = ceil(y+vspeed); else yrounded = floor(y+vspeed);
</code></pre>
<blockquote>
<h5 id="sidenote_18">Sidenote</h5>
<p>For variables local to the event, you can prepend the variable initialization with <code>var</code>. However, things like <code>var someVariable = 5</code> is only allowed in Windows. In Mac, you must do <code>var someVariable; someVariable = 5;</code></p>
</blockquote>
<p>Then use them in the collision code:</p>
<pre><code>z = instance_place(xrounded, y, oBlock);
if (z != noone) {
    hspeed = 0; lspeed = 0; rspeed = 0;
    xrounded = floor(x);
    if (z.x &gt; x) x = z.x - abs(sprite_width) + abs(sprite_xoffset) - abs(z.sprite_xoffset);
    else x = z.x + abs(z.sprite_width) + abs(sprite_xoffset) - abs(z.sprite_xoffset);
}

z = instance_place(xrounded, yrounded, oBlock);
if (z != noone) {
    vspeed = 0;
    if (z.y &gt; y) y = z.y - abs(sprite_height) + abs(sprite_yoffset) - abs(z.sprite_yoffset);
    else y = z.y + abs(z.sprite_height) + abs(sprite_yoffset) - abs(z.sprite_yoffset);
}
</code></pre>
<p>This concludes our main platforming engine section. Hopefully it didn't seem like just a list of magical steps, but instead a case study in breaking a problem in simulation down to simpler components. Of course, we omitted a big part of the process: testing and experimentation, figuring out what's wrong at each step. A platforming engine is hard to make on your first try, and even on your n-th try, because there are so many cases to consider and bang your head over.</p>
<p>Now, we'll head back to a few more common concepts in game programming.</p>
<h5 id="checkpoint_11">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/5_blocks.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/platformer/5_blocks.gmk">here</a> for Mac. The level in the zip here is minimal; try to make your own!</p>
<p><a href="#top" class="top" id="views">Top</a></p>
<h2 id="36-views">3.6 Views</h2>
<p>Our screens are only so big, and for longer levels we can't possibly have the game window stretch to fit everything. For this reason we have views, which define a small rectangle in the room that our game window is able to see. Platformer levels are normally huge, with the window often only seeing a 320x240-pixel frame of it. This is usually zoomed up so that the actual program window size, or view port, is, say, 640x480 or 960x720. To avoid a blurry image from upscaling, go to "Global Game Settings" in the left menu -&gt; Windows -&gt; Graphics, and uncheck Interpolate Colors between PIxels.</p>
<p><img alt="views" src="./images/platformer/view.png" /></p>
<p>To achieve this, go to the Room Properties and then the view tab. Enable the use of views, and make the zeroth view visible when the room starts. Finally, to match the figure above, set the width and height of the view in room to <code>(320, 240)</code>, along with the view port to <code>(640, 480)</code>, to match the figure above.</p>
<p><img alt="view tab" src="./images/platformer/viewtab.png" /></p>
<p>If you test it right now, you'll notice you can only see the leftmost end of the room, and the player can easily move out the right side. We want this frame to follow the player, and GM provides an option for that right underneath the rest of the view settings. You can select to follow the player and adjust the Hbor and Vbor to set how close to the edges of the view the player's allowed to be. Hsp and Vsp define how fast the view is allowed to move to catch up to the player if the player moves too close to the edge (-1 is a special number to mean instantaneous).</p>
<p><img alt="follow player" src="./images/platformer/viewfollow.png" /></p>
<p>If you don't prefer the instant update, maybe it'd be helpful to create a view controller object that smoothly follows the player, and then have the view center on the controller.</p>
<blockquote>
<h5 id="sidenote_19">Sidenote</h5>
<p>Gamasutra has a great survey of a lot of different view motions in platformers and other video games. It's super interesting. Check it out <a href="http://gamasutra.com/blogs/ItayKeren/20150511/243083/Scroll_Back_The_Theory_and_Practice_of_Cameras_in_SideScrollers.php">here</a>!</p>
</blockquote>
<h5 id="checkpoint_12">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/6_views.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/platformer/6_views.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="tiles">Top</a></p>
<h2 id="37-tiles">3.7 Tiles</h2>
<p>Common practice with GM and other 2D level editors is the use of a tileset, which has many parallels to a background: just an image without any complex behavior. Tile layers are images covering the room made up of unit images called tiles.</p>
<p>If you loaded the tileset provided as a background and marked it to be used as a tileset, it should be available in the tiles tab in the Room Properties window. You can then select it, pick tiles, and place them in the room over the blocks. If nothing seems to happen, it's likely because the blocks are showing up in front of the tiles. You can change the rendering order by changing the layer the tiles are on (bottom of the left tile-selection menu); lower layers are rendered first. </p>
<p><img alt="tileset" src="./images/platformer/tile_editor.png" /></p>
<p>For relatively static environments, tiles are a good way to separate function from appearance. One can make a level by laying out the blocks and important objects, and then adding the decorative tiles to serve as background or a face for the blocks. It may also be useful to, in the oBlock's object properties, uncheck the "visible" box.</p>
<h5 id="checkpoint_13">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/7_tiles.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/platformer/7_tiles.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="additions">Top</a></p>
<h2 id="38-a-few-additions">3.8 A Few Additions</h2>
<p>We'll finish with a quick look at adding a particular type of enemy and coins. These are short add-ons, and the nature of this section of the tutorial generally reflects the general experience with Game Maker: an idea/desire for a gimmick/feature, leading to looking up a short tutorial online, leading to a little more awareness of GM's features and how to use them, as well as some intuition for general game programming.</p>
<p><a id="enemies"></a></p>
<h3 id="381-enemies">3.8.1 Enemies</h3>
<p>We'll go over how to implement a Goomba-like enemy: a slow walking figure that turns around upon hitting a wall or edge and that the player can stomp on. Start by creating the object from the sprite.</p>
<h4 id="movement">Movement</h4>
<p>If we aren't expecting to subject our enemy to complicated physics, we can have the enemy move horizontally, and reversing direction upon hitting a wall.</p>
<p>What about cliffs? We could also have the enemies detect the edge of the platform themselves, but perhaps the simplest solution for simple enemies and platforms would be invisible blocks that interact only with enemies, signalling to them that it's time to turn around. They could then be placed strategically at the edge of platforms. </p>
<p><img alt="enemy blocks" src="./images/platformer/enemyblock.png" /></p>
<p>We might end up with something like <code>hspeed = -0.25</code> in the Create event and in the Step event:</p>
<pre><code>if (place_meeting(x+hspeed, y, oBlock) || place_meeting(x+hspeed, y, oEnemyBlock)) hspeed *= -1;
</code></pre>
<h4 id="collision">Collision</h4>
<p>How do we tell if a given collision between the enemy and player is a stomp or not? Two common ways: comparing the heights of the two objects, and looking at the velocity of the player.</p>
<p>The former might look like something in the player Step event, above the line that applies gravity:</p>
<pre><code>z = instance_place(x, y, oEnemy);
if (z != noone) {
    if (z.y - 5 &gt; y) {
        with z { instance_destroy(); }
        vspeed = -jumpspeed/2;
    }
    else instance_destroy();
}
</code></pre>
<blockquote>
<h5 id="sidenote_20">Sidenote</h5>
<p><code>with &lt;object&gt; { ... }</code> runs a block of code as if that <code>&lt;object&gt;</code> were running it. For instance, putting <code>with oEnemy { instance_destroy(); }</code> in <code>oPlayer</code>'s step event would get rid of all enemies.</p>
</blockquote>
<p>Super Mario Bros. actually just checks if the player's falling, with the condition <code>(vspeed &gt; 0)</code> instead of <code>(z.y - 5 &gt; y)</code>. You should test out what feels right.</p>
<h4 id="death-animation">Death Animation</h4>
<p>To make the interaction less rough, we might want to add a death animation for the enemy, perhaps by having the enemy fall off the screen. A common way to do this is to replace the enemy with a different, identically-looking object with the sole purpose of falling off the screen, rather than keeping track of whether or not the enemy's dead.</p>
<h5 id="checkpoint_14">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/8_enemies.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/platformer/8_enemies.gmz">here</a>.</p>
<p><a id="coins"></a></p>
<h3 id="382-coins">3.8.2 Coins</h3>
<p>Another common element in platformers are mass collectibles, like coins in Mario, bananas in Donkey Kong, or rings in Sonic, and with a little extra code, can make a nice effect.</p>
<p>One way to add coins: Load the sprite, and create <code>oCoin</code> and <code>oCoinCollect</code>, so that <code>oCoin</code> disappears and changes into <code>oCoinCollect</code> upon touching the player. <code>oCoinCollect</code> can then slowly move up and fade out (<code>image_alpha</code> sets how opaque an object's sprite is, so we can put <code>image_alpha -= 0.08</code> or in the Step event of <code>oCoinCollect</code>), destroying itself upon disappearing.</p>
<p>A way to keep track of coins may be to create an object just for coin counting and other game-global variables, like cCounter, and then increment the counter on that (e.g., <code>cCounter.coins += 1</code>, but first initialize coins to 0 in the Create event of <code>cCounter</code>) for every new coin collected. We haven't gone through manually displaying text or graphics, but it'll be covered in the menu section.</p>
<h5 id="checkpoint_15">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/platformer/9_coins.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/platformer/9_coins.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="level4">Top</a></p>
<h2 id="level-4-states-and-menus">Level 4: States and Menus</h2>
<blockquote>
<p><strong>Goal</strong> Use the concept of states in games by creating a multiple game screens with rooms, and learn about manual drawing.</p>
</blockquote>
<p><a href="#top" class="top" id="states">Top</a></p>
<h3 id="41-states-in-games">4.1 States in Games</h3>
<p>Games are very much governed by states, and at each level, too. On a high level, your game may have room states, being in a menu at one point, a level at another, and the credits at yet another time. On the finest scale, any instant in the game can be represented by the value of all the variables in all the objects and rest of the memory of the game, making up the save state of the game. In the platformer tutorial earlier, we tried to make sure the player would never reach an invalid state where he overlapped with an object, and it helped us reason through how to program his movement.</p>
<blockquote>
<h5 id="sidenote_21">Sidenote</h5>
<p>A more theoretical way to put it is to think of games as <em>finite state machines</em>, which are mathematical objects that have a set of states, as well as a ruleset, or <em>transition function</em>, that defines how states change into other states given some input. For example, a player might have a jumping, standing, and walking state; to change, or transition, from standing to jumping, you could press the jump button, and to change from jumping to standing, you could touch the ground.</p>
</blockquote>
<p>In this tutorial we'll be looking a little more closely at how Game Maker manages complexity using rooms as states, and how we can use states at a smaller level. Start with either your platformer project, or use the completed platformer project (the last platformer checkpoint).</p>
<p><a href="#top" class="top" id="rooms-in-GM">Top</a></p>
<h3 id="42-rooms-in-gamemaker">4.2 Rooms in GameMaker</h3>
<p>Game Maker by default splits games into rooms, representing large-scale states of the game. Multiple rooms is simple with GM, as they're treated just like other resources: right-click the rooms folder on the left and select "Create Room", or click the <img alt="new room" src="./images/menu/new_room.png" /> icon in the top menu.</p>
<p>By default, Game Maker will load up and start in the room that's at the top of the rooms list in the left menu. Game Maker has a bunch of actions for moving between rooms, available in the main1 tab, or as functions starting with <code>room_</code> (reference in the manual). </p>
<p><a id="basic-rooms-game-start-over"></a></p>
<h3 id="421-basic-rooms-game-start-and-over">4.2.1 Basic Rooms - Game Start and Over</h3>
<p>One of the most basic uses of rooms is for several screens in the game, like a start menu, a game over screen, or a credits room. In this section, we'll quickly go through the simple application of adding an intro and game over screen, using the tools we know so far.</p>
<p>Creating an intro screen is as simple as creating another room and dragging the new room above the room with the level, so the game starts out with this room.</p>
<p><img alt="many rooms" src="./images/menu/manyroom.png" /></p>
<p>In general it's a good idea to keep the window size the same between rooms, so either add a view to the room of size 320x240, or (preferably) resize the room to 320x240, and change the speed to 60.</p>
<p>Then, load the intro sprite image and associate it with an object, <code>oIntro</code>, and place it in the room. You can program the object so it animates slowly (e.g., <code>image_speed = 0.1</code>) and so that when it detects a space press, it goes to the next room in the list of rooms in the menu. Step event:</p>
<pre><code>if (keyboard_check(vk_space)) room_goto_next();
</code></pre>
<p>We can similarly have an object with a sprite saying "Game Over" in its own rGameOver room, and have the player go to this room upon hitting an enemy, instead of destroying himself. To avoid setting up the room properties all over again, it may be more useful to duplicate the intro room (right-click, select from menu), and then just replace the object with the game over object.</p>
<h5 id="checkpoint_16">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/menu/1_rooms.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/menu/1_rooms.gmk">here</a> for Mac.</p>
<p><a id="persistent-objects-room-transition"></a></p>
<h3 id="422-persistent-objects-room-transition-effects">4.2.2 Persistent Objects - Room Transition Effects</h3>
<blockquote>
<h5 id="sidenote_22">Sidenote</h5>
<p>Game Maker used to provide effects while the game changed from one room to another, but after they rewrote their graphics engine to extend better to other platforms, they had to get rid of their built-in room transitions. GM for Mac should still have the transitions available though.]</p>
</blockquote>
<p>A nice effect to smoothen the transition from one room to another is a fade-out and fade-in. One common way to implement this is through one of the few channels of communicating between room transitions: persistent objects. Objects can be marked persistent through a checkbox in the Object Properties window, and this sets the object so that the object isn't destroyed when the game moves to a different room, unlike regular objects. </p>
<blockquote>
<h5 id="sidenote_23">Sidenote</h5>
<p>The other way to keep data across room transitions is to mark the room itself as persistent, so that upon exiting and re-entering the room, its state doesn't change or reset. Global variables are another way, but they can be thought of as just member variables of an object named "global" that's persistent across rooms. </p>
</blockquote>
<p><img alt="persistent" src="./images/menu/persistent.png" /></p>
<p>To add a fade-in-fade-out transition, we can delegate all room transition calls to an object (in OOP: a sort of awkward wrapper for room transitions) that fades the screen to black, then moves to a set room, then fades out. Because this object acts between two rooms, we have to mark it as persistent.</p>
<p>For now, if your sprite sBlock is completely black, we can use that as the sprite for our room transition object, oTransition. Otherwise, make and use a purely black sprite of any size. Remember also to set the depth of oTransition to something low, like -100000, so it appears in front of the other objects in the room. We'll get into depth a little more later.</p>
<p>We want oTransition to fill up the entire screen, which means scaling the sprite so it fills the entire screen, and possibly also positioning it so it lines up with the view. Alternatively, we can, in the Step event, just scale the sprite up so big that it fills up the entire room:</p>
<pre><code>image_xscale = room_width*1000;
image_yscale = room_height*1000;
</code></pre>
<p>(Why not in the Create event? See the note below)</p>
<p>oTransition should also keep track of if it's transitioned or not, so we should add a <code>transitioned = false;</code> line to the Create event.</p>
<p>We also want to have the sprite fade in and out. To do this, we set <code>image_alpha = 0;</code> in the Create event, and in the Step event, slowly increase the opacity until it's opaque, transition the room, and then slowly decrease the opacity. In the Step event:</p>
<pre><code>if (!transitioned) image_alpha += 0.1; else image_alpha -= 0.1;
if (image_alpha &gt; 1 &amp;&amp; !transitioned) { room_goto(newRoom); transitioned = true; }
</code></pre>
<p>Finally, the object should be destroyed once it's done: In the Step event,</p>
<pre><code>if (image_alpha &lt; 0) instance_destroy();
</code></pre>
<p>For an object like oIntro to use a fading room transition to enter the level, the <code>room_goto_next();</code> code can be replaced with</p>
<pre><code>var z; z = instance_create(0, 0, oTransition);
z.newRoom = room_next(room);
</code></pre>
<p>so that the newRoom of oTransition is set like a parameter.</p>
<blockquote>
<h5 id="sidenote_24">Sidenote</h5>
<p>In case the new room is significantly bigger than the old room, we should resize the transition sprite so it covers the entirety of the new room. This is easiest if we just have the following two lines in the Step event, since we can't immediately grab the dimensions of the new room after swapping rooms.</p>
<pre><code>image_xscale = room_width*1000;
image_yscale = room_height*1000;
</code></pre>
</blockquote>
<h4 id="fitting-it-into-a-script">Fitting it into a Script</h4>
<p>If you don't want to use a "transitioned" variable, or if you want to configure how long the fade should be, you can instead use a variable like fadeLength to tackle both problems. It's a little makeshift-y. To summarize, in Create:</p>
<pre><code>fadeLength = 30; // 30 frames to fade to black
image_alpha = 0;
</code></pre>
<p>In Step:</p>
<pre><code>image_alpha += 1.0/fadeLength;
if (image_alpha &gt; 1 &amp;&amp; fadeLength &gt; 0) {
    room_goto(newRoom);
    fadeLength *= -1;
}
image_xscale = room_width*1000;
image_yscale = room_height*1000;
if (image_alpha &lt; 0) instance_destroy();
</code></pre>
<p>Usage might then be:</p>
<pre><code>var z; z = instance_create(0, 0, oTransition);
z.newRoom = room_next(room); z.fadeLength = 20;
</code></pre>
<p>We can also package this into our own global utility function, or what GM calls a script. To do this, create a new script resource, giving it the name you'd like to use to call the function, e.g., <code>room_fade_to</code>. We want to take two arguments: the new room, and (optionally) the length of the fade. </p>
<p>The script body will be similar to the example usage above, except to refer to arguments, we use the identifiers <code>argument[0...15]</code> and <code>argument_count</code> for the number of arguments passed into the script. The body would look like:</p>
<pre><code>var z; z = instance_create(0, 0, oTransition);
z.newRoom = argument[0];
if (argument_count &gt; 1) z.fadeLength = argument[1];
</code></pre>
<blockquote>
<h5 id="mac-users_5">Mac Users</h5>
<p>GM for Mac uses <code>argument0, ..., argument15</code>. To test if an argument is used, you should use <code>variable_local_exists(...)</code>. For example¸</p>
<pre><code>z = instance_create(0, 0, oTransition);
z.newRoom = argument0;
if (variable_local_exists("argument1")) z.fadeLength = argument1;
</code></pre>
</blockquote>
<p>Usage would then be reduced to <code>room_fade_to(room_next(room), 20);</code></p>
<h5 id="checkpoint_17">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/menu/2_transition.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/menu/2_transition.gmz">here</a>..</p>
<p><a href="#top" class="top" id="manual-drawing">Top</a></p>
<h2 id="43-manual-drawing">4.3 Manual Drawing</h2>
<p><a id="draw-event"></a></p>
<h3 id="431-the-draw-event">4.3.1 The Draw Event</h3>
<p>A brief digression from states: In games it's often useful to control what's rendered onto the screen, beyond just relying on sprites assigned to objects. Internally, what GM does is run through the update method of every object in a room once per frame, and <em>then</em> go through all the objects again to render the sprites on the screen in their new positions, with all the modifiers added (scaling, alpha, etc.). This second run through all the objects that <em>draws</em> them all is captured in another event: the Draw event. </p>
<p>The pass that draws all the objects is more complicated than the first pass that steps through objects, because drawing needs to be done in a specific order. Something in the background, for instance, should be drawn before something in the foreground, since drawing something necessarily covers up what was drawn there already. To define drawing order, objects in GM have a depth; objects with lower depth are drawn later, and thus above objects with higher depth (i.e., deeper objects are drawn first and covered up by objects that aren't as deep).</p>
<p>In GM Studio for Windows, there's a whole family of draw events, like Start Draw and Draw GUI, meant to help organize the common types of drawing actions in games. Everything's doable with the vanilla Draw event, though&mdash;the only one available on Mac. </p>
<p>If there's no Draw event specified for an object, GM by default just draws the object's sprite, with transformation (scaling, rotation) and coloring (alpha) applied. We can override this by specifying our own Draw event, which is useful if we want an object to draw things like text or shapes. GM provides an tab for drawing actions, as well as a slew of drawing functions starting with <code>draw_</code> and setting functions starting with <code>draw_set_</code>.</p>
<p><a id="info-text"></a></p>
<h3 id="432-informational-text">4.3.2 Informational Text</h3>
<p>To demonstrate custom drawing, we'll add a basic lives system to the game and have a screen to display how many lives the player has between deaths, like in Super Mario Bros.
To start, create a new room between rIntro and rLevel by duplicating rIntro and emptying the object in the room. We'll make and put in that room a new object, cLifeInfo, to display the number of remaining lives and, after a few seconds, move back to the level room.
In addition, install and load the Press Start 2P font as a resource, naming it something like fDefault. To fit with the pixel aesthetic, it's a good idea to disable anti-aliasing and high quality, as well as to set the font size to 6 in Windows, or 8 in Mac (whatever size that makes it look sharp). 
Finally, we'll make cCounter persistent and move it to rIntro, out of rLevel (i.e., delete from rLevel, create in rIntro), so that things like lives, coins, and score are set from the very beginning. In cCounter's create event, initialize plives to 3. We want something approximately like</p>
<p><img alt="life info screen" src="./images/menu/lifeinfo.png" /></p>
<p>Which has the following components:</p>
<ul>
<li>A white rectangle on a black background</li>
<li>A player sprite</li>
<li>2 pieces of grey text in the middle.</li>
</ul>
<p>We can do this with the functions <code>draw_text</code>, <code>draw_rectangle</code>, and <code>draw_sprite</code>, which take in position coordinates for where to draw, along with some other arguments, like the text to draw, or the sprite index. We also need to specify color and font, which can be done with <code>draw_set_color</code> and <code>draw_set_font</code>, which take in a color and font, respectively. These two <code>draw_set</code> functions are similar to selecting a font or color in a drawing program, while <code>draw_text</code>, etc., actually put the graphics on the screen.</p>
<p>For me,</p>
<pre><code>// draw a white rectangle
draw_set_color(c_white);
draw_rectangle(room_width/4, room_height/4, room_width*3/4, room_height*3/4, false);

// draw the player sprite
draw_sprite(sPlayer, 0, room_width/2-14, room_height/2-6);

// draw gray text in our font
draw_set_color(c_gray);
draw_set_font(fDefault);
draw_text(room_width/2, room_height/2-3, "x");
draw_text(room_width/2+12, room_height/2-2, string(cCounter.plives));
</code></pre>
<p>positions the objects correctly. If you're not using the included font, offsets might differ slightly. (GM has tooltips to explain what all the arguments mean; the manual is also a reference)</p>
<blockquote>
<h5 id="sidenote_25">SIDENOTE</h5>
<p>The hassle with fonts and GM projects is due to licensing: GM font resources are merely pointers to fonts installed on your computer. When the game is compiled into an executable, GM turns the font into an image to be shipped with the rest of the game, so the games are portable, but not their source. I don't blame you if you want to use a font already installed on your computer for this step.</p>
</blockquote>
<p>In addition, add behavior using an alarm that fades the room into the level room after a few seconds, and update the player-enemy collision behavior so it subtracts a life and moves to rInfo, or rGameOver if there are no more lives.</p>
<h5 id="checkpoint_18">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/menu/3_lifeinfo.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/menu/3_lifeinfo.gmk">here</a> for Mac.</p>
<p><a id="hud"></a></p>
<h3 id="433-a-hud-head-up-display">4.3.3 A HUD (Head-Up Display)</h3>
<p>We can easily extend this to a head-up display, or HUD, in the level. This HUD will display information about coins and lives at the top of the screen. Create a new cHUD object with a low depth (say, -200000) and place it in the level room. To get something like</p>
<p><img alt="hud" src="./images/menu/hud.png" /></p>
<p>We need to draw 2 sprites and two strings of text. In the Draw event, after fiddling around with the position offsets, we might include something like </p>
<pre><code>draw_set_font(fDefault);

draw_sprite(sPlayer, 0, 11, 3);
draw_text(21, 5, string(cCounter.plives));

draw_sprite(sCoin, 0, 30, 3);
draw_text(46, 5, string(cCounter.coins));
</code></pre>
<p>If you test the game, you'll notice that the HUD doesn't scroll with the view (why? Think about it before you read the next sentence). To fix this, we need to render at positions offset by the view position, accessible by <code>view_xview[0...7]</code> and <code>view_yview[0...7]</code>. Moreover, the view that's currently active is accessed by <code>view_current</code>. We have a final Draw event with code:</p>
<pre><code>var vx; vx = view_xview[view_current];
var vy; vy = view_yview[view_current];
draw_set_font(fDefault);

draw_sprite(sPlayer, 0, 11+vx, 3+vy);
draw_text(21+vx, 5+vy, string(cCounter.plives));

draw_sprite(sCoin, 0, 30+vx, 3+vy);
draw_text(46+vx, 5+vy, string(cCounter.coins));
</code></pre>
<h5 id="checkpoint_19">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/menu/4_hud.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/menu/4_hud.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="menus">Top</a></p>
<h2 id="44-a-menu">4.4 A Menu</h2>
<p>To demonstrate a basic deliberate use of states, we'll turn the introduction screen into a start menu, with three options: starting the game, setting the number of initial lives, and exiting the game. </p>
<p><img alt="screen" src="./images/menu/screen.png" /></p>
<p>Load sIntro2 from the animation provided. We want to have oIntro draw the title sprite, along with 3 menu options. A basic Draw event for oIntro might be:</p>
<pre><code>var xoff; var yoff; var space;
xoff = -7; yoff = 7; space = 13;

// draw title sprite
draw_sprite(sIntro2, image_index, 0, 0);

draw_set_font(fDefault);
// draw the 3 pieces of text
draw_text(room_width/2 + xoff, room_height/2 + yoff, "Start");
draw_text(room_width/2 + xoff - 1, room_height/2 + yoff + space, "Lives: " + string(cCounter.plives));
draw_text(room_width/2 + xoff, room_height/2 + 2*space + yoff, "End");
</code></pre>
<p>The state of the menu will then be represented by the currently selected menu item, which we can put in a variable, state, initialized to 0 in the Create event.</p>
<p>Then, during each Step, oIntro can update its state depending on the input. Something like:</p>
<pre><code>if (keyboard_check_pressed(vk_up)) state -= 1;
if (keyboard_check_pressed(vk_down)) state += 1
state = (state + 3) % 3; // in Mac: state = (state + 3) mod 3;
</code></pre>
<p>would make the state cycle between 0, 1, and 2. (<code>%</code> is the <a href="https://en.wikipedia.org/wiki/Modulo_operation">modulus operator</a>. <code>a % b</code> is the remainder when a is divided by b, if a is nonnegative)</p>
<blockquote>
<h5 id="sidenote_26">Sidenote</h5>
<p>In CS Theory lingo, this roughly corresponds to the transition function in a finite state automaton, since it defines how our input changes the state&mdash;in this case, pressing a given arrow key either moves increases or decreases the state.</p>
</blockquote>
<p>To make use of these states, we need to render something to show what state is currently active, e.g., by putting a sprite to the left of the active option.</p>
<pre><code>draw_sprite(sCoin, 0, room_width/2 + xoff - 19, room_height/2 + yoff + space*state - 4);
</code></pre>
<p>This puts a coin sprite to the left of the menu options, at the height of the selected option, using the expression <code>space*state</code> (which is a good expression to use because when state goes up by one, <code>space*state</code> increases by space, thus moving the sprite down by one menu item height). </p>
<p>Finally, we need to have the states correspond to behavior. This is as simple as making a set of <code>if</code> statements or a <code>switch</code> statement.</p>
<pre><code>switch (state) {
case 0:
    if (keyboard_check_pressed(vk_space)) room_fade_to(room_next(room));
    break;
case 1:
    if (keyboard_check_pressed(vk_right)) cCounter.plives += 1;
    if (keyboard_check_pressed(vk_left)) cCounter.plives -= 1;
    break;
case 2:
    if (keyboard_check_pressed(vk_space)) game_end();
    break;
}
</code></pre>
<p>A menu is the most explicit demonstration of states in a game, but it doesn't have to be like that. A coin and its collect animation can be put into one object if the coin keeps track of its state: whether it's collected or not. The player in a more complicated platformer might behave differently depending on whether or not he's in the air or on the ground, or if he has a powerup or not. </p>
<h5 id="checkpoint_20">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/menu/5_menu.gmz">here</a> for Windows, for <a href="./resources/checkpoints_mac/menu/5_menu.gmk">here</a> for Mac.</p>
<p><a id="pause-menu"></a></p>
<h3 id="45-a-pause-screen">4.5 A Pause Screen</h3>
<p>Here's one final demonstration of states, and how GM's built-in states&mdash;rooms&mdash;can implement this easily. On a high level, we want to have behavior in the game loop like this:</p>
<pre><code>state - game running in a level:
    simulate a step normally
    *check if the player wants to pause (e.g. pressed p)
state - game paused:
    display a pause message
    *check if player wants to unpause
state - game in other screen (like a menu):
    simulate a step normally
</code></pre>
<p>The reason rooms work so well here is that one can control whether or not to simulate a step in the level by controlling the current room. That is, a level and pause room correspond exactly with the game unpaused and paused states above, so we can pause and unpause by swapping rooms.</p>
<p>To implement this, start by making a persistent object cPause and put it in the first room of the game. Also duplicate rInfo to create an empty rPause room with a black background.</p>
<p>We want cPause to make the pause state correspond exactly with the rooms. To do this, cPause needs to render and perform logic according to the room. Rendering correctly would mean drawing "PAUSED" in the pause state / rPause room:</p>
<pre><code>if (room == rPause)
{
    draw_set_color(c_white);
    draw_text(room_width/2-30, room_height/2-2, "PAUSED");
}
</code></pre>
<p>and performing correct logic means enabling pausing and unpausing depending on the room:</p>
<pre><code>switch (room) {
case rIntro: case rInfo: case rGameOver: // for menu/info rooms,
    // don't do anything
    break;
case rPause: // in the pause room,
    // if p is pressed, go back to the room you came from and unset the persistence
    break;
default: // for all remaining rooms (levels),
    // if p is pressed, mark this room persistent and go to the pause room
    break;
}
</code></pre>
<p>which roughly translates to, in the Step event:</p>
<pre><code>switch (room) {
case rIntro: case rInfo: case rGameOver:
    break;
case rPause:
    if (keyboard_check_pressed(ord('P'))) {
        room_goto(prevRoom);
        room_persistent = prevPersistent; // reset the room's persistence
    }
    break;
default:
    if (keyboard_check_pressed(ord('P'))) {
        prevRoom = room;
        prevPersistent = room_persistent; // remember if the room was persistent earlier
        room_persistent = true;
        room_goto(rPause);
    }
    break;
}
</code></pre>
<p>Which remembers if the room was persistent before the pause room, and sets it back to the previous setting upon unpause.</p>
<p>The slight problem with this is that <code>room_goto(...)</code> changes the room only at the end of all the steps, so resetting the room persistence must be done a step later, when we're actually back in the room. To do this, we give cPause an extra flag, resetPersistent, and initialize it to false in the Create event, to keep track of whether or not the room's persistent flag needs to be reset or not.</p>
<pre><code>switch (room) {
case rIntro: case rInfo: case rGameOver:
    break;
case rPause:
    if (keyboard_check_pressed(ord('P'))) {
        room_goto(prevRoom);
        resetPersistent = true;
    }
    break;
default:
    if (resetPersistent) {
        resetPersistent = false;
        room_persistent = prevPersistent;
    }
    if (keyboard_check_pressed(ord('P'))) {
        prevRoom = room;
        prevPersistent = room_persistent;
        room_persistent = true;
        room_goto(rPause);
    }
    break;
}
</code></pre>
<h5 id="checkpoint_21">Checkpoint</h5>
<p>You can download the GM project with everything up to this step <a href="./resources/checkpoints/menu/6_pause.gmz">here</a> for Windows, or <a href="./resources/checkpoints_mac/menu/6_pause.gmk">here</a> for Mac.</p>
<p><a href="#top" class="top" id="last-words-level4">Top</a></p>
<h2 id="45-a-few-last-words">4.5 A Few Last Words</h2>
<p>The concept of states is simple to grasp and also simple to program. As we mentioned earlier, it can often be implicit in your code too: you might use an if-statement to give different behavior to the player depending on if he's in the air and or on the ground, thus giving him a state.</p>
<p>Deliberately thinking about software, and especially a game, in terms of states, however, is powerful and useful for simplifying the complex workings of such a program. Most of the time, bugs and exploits come from the game going into an invalid state, and so ensuring that nothing breaks within a state and no state goes to an invalid state is a good defense against errors. Hopefully this step in our tutorial gave some more concrete examples of states in game programming, along with a little more exposure to some functions GM provides.</p>
<p><a href="#top" class="top" id="level5">Top</a></p>
<h2 id="level-5-feature-suggestions">Level 5: Feature Suggestions</h2>
<blockquote>
<p><strong>Goal</strong> Implement your own ideas into the basic platformer we made.</p>
</blockquote>
<p>Congratulations! You made it to the end of this lesson! Now that you have made two games, and have gotten a feel for game design, why don't you start embellishing these games to make them truly stand out? We don't go step by step for these suggestions, but we'll give helpful hints to guide you.</p>
<p>Now, here are some gimmicks you can try to add into your game! For now, pick one you want to work on and try implementing that in the platformer we made together.</p>
<h5 id="power-up-items">Power-up items</h5>
<p>Remember how we added coins in our platformer? Adding items is probably the next thing that came into your mind. Adding an item is very similar to adding a coin into your platformer, and the effect they have can be determined by you! Just like how we wrote how to make the coin counter go up as you collected more coins, you can code in specific effects, like the player getting larger or becoming invinsible, as well.</p>
<h5 id="extra-life-mechanism">Extra life mechanism</h5>
<p>Have you played Super Mario Bros.? If you have, you would probably know that collecting 100 coins nets you an extra life. Why don't you try adding that in to your game? But, it doesn't have to necessariliy be the number of coins. Why not have it so that for every 1000 points in your score you get an extra life? Try to get creative here! And why an extra life? Why not make it that the player becomes invincible? Or super big? Or anything really that you can come up with!</p>
<h5 id="special-platformsspaces">Special platforms/spaces</h5>
<p>Now that you know that everything in a room in GameMaker is an object, why not play with that idea and try to make special platforms or spaces? How about a space that makes the player super fast for a few seconds? Or maybe a spring to let them jump higher? By making special space objects and adding events to either the player or the space itself to give these effects can help make your platformer more dynamic and open up new revenues for in-game puzzles and more creative level designs!</p>
<h5 id="shooting-and-running">Shooting and Running</h5>
<p>Have you ever played Mega Man? Well, even if you haven't, you probably know that our little blue hero can run and shoot out bullets at the same time to kill enemies in his way. Why not try to implement this mechanic in your game by using the techniques from the top-down shooter to help you? Just keep in mind where the bullets are being created, in what direction they should go depending on the inputs, and how frequently they can be shot.</p>
<h5 id="time-limit">Time Limit</h5>
<p>A time limit is a pretty common aspect in platformers. We can't have the player just sit around while the game runs, now can we? Try creating a time limit for the platformer level you designed. You can have it so that after a certain amount of seconds have passed that a sound or visual effect can happen to alert the player. Think about how the game is running, and with that knowledge try to implement a limit to how long the player can take for your level!</p>
<p>The possibilities are endless when designing a game. This is a world you're creating, so don't be afraid to experiment when making it! </p>
<p><a href="#top" class="top" id="additionalresources">Top</a></p>
<h2 id="additional-resources">Additional Resources</h2>
<p>This tutorial tries to give a quick overview of a lot of aspects of game development. The best way to learn more game programming is to have a project in mind. Think about the mechanics your project would need, and search up tutorials for those specific behaviors, thus building up your library of techniques. This piecewise learning process is particularly well suited to games just because it's so easy to think of something concrete to add.</p>
<p>Other than that, some good resources for game development are listed below:</p>
<ul>
<li><a href="http://ludumdare.com/compo/">Ludum Dare</a> - A game jam with a great community and links to tutorials and tools</li>
<li><a href="http://gamasutra.com/">Gamasutra</a> - A news site for game developers, with articles on design and programming</li>
<li><a href="http://www.gamedev.net/page/index.html">gamedev.net</a> - A huge community and library of tutorials, from basic beginner development, to design, to advanced graphics</li>
</ul>
<!-- Asynchronous Google Analytics snippet -->
<script>
    var _gaq = _gaq || [];
    var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
    _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
    _gaq.push(['_setAccount', 'UA-18504951-1']);
    _gaq.push(['_trackPageview']);

    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body></html>